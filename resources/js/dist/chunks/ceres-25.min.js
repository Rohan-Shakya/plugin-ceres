"use strict";(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[25],{3679:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cmp-totals"},[s("div",{staticClass:"h3"},[e._v(e._s(e.$translate("Ceres::Template.basketSum")))]),e._v(" "),s("div",{staticClass:"component-loading with-icon refreshing",class:{"is-loading":e.isBasketLoading}},[s("dl",[e._t("before-item-sum"),e._v(" "),(e.visibleFields.includes("additionalCosts")||e.visibleFields.includes("basket.additional_costs"))&&e.displayedProperties.length?[e._l(e.displayedProperties,(function(t){return[s("dt",{key:"property-name-"+t.propertyId,class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"additionalcost-with-tax"}},[e._v("\n                        "+e._s(t.name)+"\n                    ")]),s("dd",{key:"property-price-"+t.propertyId,class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                        "+e._s(e._f("currency")(t.price))+"\n                    ")])]}))]:e._e(),e._v(" "),e.visibleFields.includes("basketValueNet")||e.visibleFields.includes("basket.value_of_items_net")?[s("dt",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketValue"))+" "+e._s(e.$translate("Ceres::Template.basketNet"))+"\n                ")]),s("dd",{class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"item-sum-net"}},[e._v("\n                    "+e._s(e._f("currency")(e.calculateBaseValue(e.basket.itemSumNet,e.basket.basketRebate)))+"\n                ")])]:e._e(),e._v(" "),e.visibleFields.includes("basketValueGross")||e.visibleFields.includes("basket.value_of_items_gross")?[s("dt",{class:{"font-weight-bold":!e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketValue"))+" "+e._s(e.$translate("Ceres::Template.basketGross"))+"\n                ")]),s("dd",{class:{"font-weight-bold":!e.showNetPrices},attrs:{"data-testing":"item-sum"}},[e._v("\n                    "+e._s(e._f("currency")(e.calculateBaseValue(e.basket.itemSum,e.basket.basketRebate)))+"\n                ")])]:e._e(),e._v(" "),(e.visibleFields.includes("rebate")||e.visibleFields.includes("basket.rebate"))&&e.basket.basketRebate?[s("dt",{staticClass:"rebate-hint"},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketRebate"))+"\n                ")]),e.showNetPrices?s("dd",{staticClass:"rebate-hint"},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketRebateSign"))+e._s(e._f("currency")(e.calculateBaseValue(e.basket.itemSumNet,e.basket.basketRebate)-e.basket.itemSumNet))+"\n                ")]):s("dd",{staticClass:"rebate-hint"},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketRebateSign"))+e._s(e._f("currency")(e.calculateBaseValue(e.basket.itemSum,e.basket.basketRebate)-e.basket.itemSum))+"\n                ")]),e._v(" "),s("dt",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketSubTotal"))+" "+e._s(e.$translate("Ceres::Template.basketNet"))+"\n                ")]),s("dd",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.itemSumNet))+"\n                ")]),e._v(" "),s("dt",{class:{"font-weight-bold":!e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketSubTotal"))+" "+e._s(e.$translate("Ceres::Template.basketGross"))+"\n                ")]),s("dd",{class:{"font-weight-bold":!e.showNetPrices}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.itemSum))+"\n                ")])]:e._e(),e._v(" "),e._t("after-item-sum"),e._v(" "),e._t("before-shipping-costs"),e._v(" "),e.visibleFields.includes("shippingCostsNet")||e.visibleFields.includes("basket.shipping_costs_net")?[s("dt",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketShippingCosts"))+" "+e._s(e.$translate("Ceres::Template.basketNet"))+"\n                ")]),s("dd",{class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"shipping-amount-net"}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.shippingAmountNet))+"\n                ")])]:e._e(),e._v(" "),e.visibleFields.includes("shippingCostsGross")||e.visibleFields.includes("basket.shipping_costs_gross")?[s("dt",{class:{"font-weight-bold":!e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketShippingCosts"))+" "+e._s(e.$translate("Ceres::Template.basketGross"))+"\n                ")]),s("dd",{class:{"font-weight-bold":!e.showNetPrices},attrs:{"data-testing":"shipping-amount"}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.shippingAmount))+"\n                ")])]:e._e(),e._v(" "),e._t("after-shipping-costs"),e._v(" "),(e.visibleFields.includes("promotionCoupon")||e.visibleFields.includes("basket.promotion_coupon"))&&e.basket.couponCode&&"promotion"===e.basket.couponCampaignType?[s("dt",{staticClass:"font-weight-bold"},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketCoupon"))+"\n                ")]),s("dd",{staticClass:"font-weight-bold",attrs:{"data-testing":"promotion-coupon"}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.couponDiscount))+"\n                ")])]:e._e(),e._v(" "),s("hr"),e._v(" "),e._t("before-total-sum"),e._v(" "),e.visibleFields.includes("subAmount")||e.visibleFields.includes("basket.order_total_net")?[s("dt",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketSubAmount"))+" "+e._s(e.$translate("Ceres::Template.basketNet"))+"\n                ")]),s("dd",{class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"basket-sub-amount"}},[e._v("\n                    "+e._s(e._f("currency")(e.basket.subAmount))+"\n                ")])]:e._e(),e._v(" "),e._t("before-vat"),e._v(" "),e._l(e.basket.totalVats,(function(t){return e.visibleFields.includes("vats")||e.visibleFields.includes("basket.vat")?[s("dt",[e._v("\n                    "+e._s(e.$translate("Ceres::Template.basketVAT"))+" "+e._s(t.vatValue)+"%\n                ")]),s("dd",{attrs:{"data-testing":"vat-amount"}},[e._v("\n                    "+e._s(e._f("currency")(t.vatAmount))+"\n                ")])]:e._e()})),e._v(" "),e._t("after-vat"),e._v(" "),(e.visibleFields.includes("additionalCosts")||e.visibleFields.includes("basket.additional_costs"))&&e.displayedPropertiesWithoutTax.length?[e._l(e.displayedPropertiesWithoutTax,(function(t){return[s("dt",{key:"property-name-"+t.propertyId,class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"additionalcost-without-tax"}},[e._v("\n                        "+e._s(t.name)+"\n                    ")]),s("dd",{key:"property-price-"+t.propertyId,class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                        "+e._s(e._f("currency")(t.price))+"\n                    ")])]}))]:e._e(),e._v(" "),s("div",{staticClass:"totalSum"},[s("hr"),e._v(" "),e.visibleFields.includes("totalSumNet")||e.visibleFields.includes("basket.order_total_net")?[s("dt",{class:{"font-weight-bold":e.showNetPrices}},[e._v("\n                        "+e._s(e.$translate("Ceres::Template.basketTotalSum"))+" "+e._s(e.$translate("Ceres::Template.basketNet"))+"\n                    ")]),s("dd",{class:{"font-weight-bold":e.showNetPrices},attrs:{"data-testing":"basket-amount-net"}},[e._v("\n                        "+e._s(e._f("currency")(e.basket.basketAmountNet))+"\n                    ")])]:e._e(),e._v(" "),e.visibleFields.includes("totalSumGross")||e.visibleFields.includes("basket.order_total_gross")?[s("dt",{class:{"font-weight-bold":!e.showNetPrices}},[e._v("\n                        "+e._s(e.$translate("Ceres::Template.basketTotalSum"))+" "+e._s(e.$translate("Ceres::Template.basketGross"))+"\n                    ")]),s("dd",{class:{"font-weight-bold":!e.showNetPrices},attrs:{"data-testing":"basket-amount"}},[e._v("\n                        "+e._s(e._f("currency")(e.basket.basketAmount))+"\n                    ")])]:e._e(),e._v(" "),(e.visibleFields.includes("salesCoupon")||e.visibleFields.includes("basket.sales_coupon"))&&e.basket.couponCode&&"sales"===e.basket.couponCampaignType?[s("dt",{staticClass:"font-weight-bold"},[e._v("\n                        "+e._s(e.$translate("Ceres::Template.basketCoupon"))+"\n                    ")]),s("dd",{staticClass:"font-weight-bold",attrs:{"data-testing":"sales-coupon"}},[e._v("\n                        "+e._s(e._f("currency")(e.basket.couponDiscount))+"\n                    ")])]:e._e(),e._v(" "),(e.visibleFields.includes("openAmount")||e.visibleFields.includes("basket.open_amount"))&&"sales"===e.basket.couponCampaignType?[s("dt",{staticClass:"font-weight-bold"},[e._v("\n                        "+e._s(e.$translate("Ceres::Template.basketOpenAmount"))+"\n                    ")]),s("dd",{staticClass:"font-weight-bold",attrs:{"data-testing":"open-amount"}},[e._v("\n                        "+e._s(e._f("currency")(e.basket.openAmount))+"\n                    ")])]:e._e()],2),e._v(" "),e._t("after-total-sum")],2)]),e._v(" "),e.basket.isExportDelivery&&e.deliveryExportTranslation?s("div",{staticClass:"alert alert-info w-100"},[e._v("\n        "+e._s(e.deliveryExportTranslation)+"\n    ")]):e._e()])};a._withStripped=!0;var i=s(629),r=s(5876),n={name:"basket-totals",data:()=>({displayedProperties:[],displayedPropertiesWithoutTax:[]}),created(){this.setPropertiesForTotals(this.basketItems)},watch:{basketItems:{deep:!0,handler(e){this.setPropertiesForTotals(e)}}},props:{visibleFields:{type:Array,default:()=>["basketValueNet","basketValueGross","rebate","shippingCostsNet","shippingCostsGross","promotionCoupon","totalSumNet","vats","additionalCosts","totalSumGross","salesCoupon","openAmount","subAmount"]}},computed:{currentShippingCountry(){const e=this.basket.shippingCountryId;return this.shippingCountries.find((t=>t.id===e))},shopCountry(){const e=this.basket.shopCountryId;return this.shippingCountries.find((t=>t.id===e))},deliveryExportTranslation(){const e=this.shopCountry&&this.shopCountry.currLangName,t=this.currentShippingCountry&&this.currentShippingCountry.currLangName;return this.$translate("Ceres::Template.basketExportDeliveryWarning",{from:e,to:t})},...(0,i.rn)({basket:e=>e.basket.data,basketItems:e=>e.basket.items,isBasketLoading:e=>e.basket.isBasketLoading,shippingCountries:e=>e.localization.shippingCountries,showNetPrices:e=>e.basket.showNetPrices})},methods:{calculateBaseValue:(e,t)=>e/(100-t)*100,isVariationProperty:e=>e.property.isOderProperty&&App.useVariationOrderProperties,isInBasketItemOrderParams:(e,t)=>!t.property.isOderProperty&&!App.useVariationOrderProperties||!!e.basketItemOrderParams.find((e=>Number(e.propertyId)===Number(t.propertyId))),setPropertiesForTotals(e){this.displayedPropertiesWithoutTax=[],this.displayedProperties=[];for(const t of e)t.variation.data.properties?.forEach((e=>{if(this.isInBasketItemOrderParams(t,e)&&((0,r.Lh)(e)||!(0,r.uP)(e)&&App.useVariationOrderProperties)){const s=this.displayedProperties.find((t=>t.propertyId===e.propertyId)),a=this.displayedPropertiesWithoutTax.find((t=>t.propertyId===e.propertyId)),i=s||a;if(i)i.quantity+=t.quantity;else{const s={propertyId:e.propertyId,name:e.property.names.name,quantity:t.quantity,surcharge:this.$options.filters.propertySurcharge(t.variation.data.properties,e.propertyId),vatId:e.property.vatId};(0,r.uP)(e)?this.displayedProperties.push(s):this.displayedPropertiesWithoutTax.push(s)}}}));this.displayedPropertiesWithoutTax.forEach((e=>{e.price=e.quantity*e.surcharge})),this.displayedProperties.forEach((e=>{e.price=e.quantity*e.surcharge}))}}},o=(0,s(1900).Z)(n,a,[],!1,null,null,null);o.options.__file="resources/js/src/app/components/basket/BasketTotals.vue";var l=o.exports}}]);
//# sourceMappingURL=ceres-25.min.js.map