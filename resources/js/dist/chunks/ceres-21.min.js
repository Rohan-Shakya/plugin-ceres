"use strict";(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[21],{3131:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"reset-pwd-container login-pwd-reset",attrs:{id:"reset-pwd-form-"+e._uid,method:"post"}},[a("div",{ref:"pwdModal",staticClass:"modal fade",attrs:{id:"resetPwd",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"modal-title h3"},[e._v(e._s(e.$translate("Ceres::Template.loginForgotPassword")))]),e._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true","aria-label":e.$translate("Ceres::Template.closeIcon")}},[e._v("Ã—")])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"alert alert-info w-100 pwd-forgot-info"},[a("span",{staticClass:"info-badge"},[e._v(e._s(e.$translate("Ceres::Template.loginForgotPasswordInfo")))])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{type:"text",name:"username",autocomplete:"new-password",tabindex:"-1"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}}),e._v(" "),a("div",{staticClass:"input-unit no-bottom",attrs:{"data-validate":"mail"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"email",name:"email",autocomplete:"email",id:"mail"+e._uid,"data-autofocus":""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"mail"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.loginEmail"))+"*")])]),e._v(" "),a("span",{staticClass:"error-msg"},[e._v(e._s(e.$translate("Ceres::Template.loginEnterConfirmEmail")))])])])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("div",[e._t("extend-overlay-buttons"),e._v(" "),e.currentTemplate&&"tpl.login"!=e.currentTemplate?a("button",{staticClass:"btn btn-danger btn-medium mr-2",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.cancelResetPwd(t)}}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),e._v("\n                                "+e._s(e.$translate("Ceres::Template.loginBackToLogin"))+"\n                            ")]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-primary btn-medium",attrs:{disabled:e.isDisabled},on:{click:function(t){return t.preventDefault(),e.validateResetPwd(t)}}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.$translate("Ceres::Template.loginSend"))+"\n\t\t\t\t\t\t\t\t"),a("icon",{attrs:{icon:"paper-plane-o",loading:e.isDisabled}})],1)],2)])])])])])};s._withStripped=!0;var o=a(3085),l=a(1452),i=a(7832),r=a(7412),n=a(3279),d=a(1023),m={name:"forgot-password-modal",props:{currentTemplate:String},data:()=>({username:"",isDisabled:!1,honeypot:""}),mounted(){this.$nextTick((()=>{$(this.$refs.pwdModal).on("hidden.bs.modal",(()=>{this.username=""}));const e=n.ZP.getUrlParams(document.location.search);(0,d.le)(e.show)||"forgotPassword"!==e.show||(i.default.findModal(this.$refs.pwdModal).show(),this.username=(0,d.le)(e.email)?"":e.email)}))},watch:{username(e,t){this.resetError()}},methods:{validateResetPwd(){r.default.validate(this.$refs.pwdModal).done((()=>{this.sendResetPwd()})).fail((e=>{r.default.markInvalidFields(e,"error")}))},sendResetPwd(){this.isDisabled=!0,o.default.post("/rest/io/customer/password_reset",{email:this.username,honeypot:this.honeypot}).done((()=>{i.default.findModal(this.$refs.pwdModal).hide(),this.isDisabled=!1,l.default.success(this.$translate("Ceres::Template.loginSendEmailOk")).closeAfter(5e3)})).fail((()=>{this.isDisabled=!1,l.default.error(this.$translate("Ceres::Template.loginResetPwDErrorOnSendEmail")).closeAfter(5e3)}))},cancelResetPwd(){this.resetError(),i.default.findModal(this.$refs.pwdModal).hide().then((()=>{i.default.findModal(document.getElementById("login")).show()}))},resetError(){r.default.unmarkAllFields(this.$refs.pwdModal)}}},u=(0,a(1900).Z)(m,s,[],!1,null,null,null);u.options.__file="resources/js/src/app/components/customer/login/ForgotPassword.vue";var c=u.exports}}]);
//# sourceMappingURL=ceres-21.min.js.map