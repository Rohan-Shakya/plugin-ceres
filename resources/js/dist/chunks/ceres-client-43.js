"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkCeres"] = self["webpackChunkCeres"] || []).push([[43],{

/***/ "./resources/js/src/app/components/item/VariationSelect.vue":
/*!******************************************************************!*\
  !*** ./resources/js/src/app/components/item/VariationSelect.vue ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./VariationSelect.vue?vue&type=template&id=4a939d05& */ \"./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05&\");\n/* harmony import */ var _VariationSelect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./VariationSelect.vue?vue&type=script&lang=js& */ \"./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\");\n/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ \"./node_modules/vue-loader/lib/runtime/componentNormalizer.js\");\n\n\n\n\n\n/* normalize component */\n;\nvar component = (0,_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n  _VariationSelect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__.render,\n  _VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = \"resources/js/src/app/components/item/VariationSelect.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQThGO0FBQzNCO0FBQ0w7OztBQUc5RDtBQUNBLENBQXNHO0FBQ3RHLGdCQUFnQix1R0FBVTtBQUMxQixFQUFFLHFGQUFNO0FBQ1IsRUFBRSx1RkFBTTtBQUNSLEVBQUUsZ0dBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxLQUFVLEVBQUUsWUFpQmY7QUFDRDtBQUNBLCtEQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ2VyZXMvLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT80NzkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD00YTkzOWQwNSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgbnVsbCxcbiAgbnVsbFxuICBcbilcblxuLyogaG90IHJlbG9hZCAqL1xuaWYgKG1vZHVsZS5ob3QpIHtcbiAgdmFyIGFwaSA9IHJlcXVpcmUoXCIvVXNlcnMvbHVrYXNtYXR6ZW4vd29ya3NwYWNlMi9wbHVnaW5zL0NlcmVzL25vZGVfbW9kdWxlcy92dWUtaG90LXJlbG9hZC1hcGkvZGlzdC9pbmRleC5qc1wiKVxuICBhcGkuaW5zdGFsbChyZXF1aXJlKCd2dWUnKSlcbiAgaWYgKGFwaS5jb21wYXRpYmxlKSB7XG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoKVxuICAgIGlmICghYXBpLmlzUmVjb3JkZWQoJzRhOTM5ZDA1JykpIHtcbiAgICAgIGFwaS5jcmVhdGVSZWNvcmQoJzRhOTM5ZDA1JywgY29tcG9uZW50Lm9wdGlvbnMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZWxvYWQoJzRhOTM5ZDA1JywgY29tcG9uZW50Lm9wdGlvbnMpXG4gICAgfVxuICAgIG1vZHVsZS5ob3QuYWNjZXB0KFwiLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTRhOTM5ZDA1JlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBhcGkucmVyZW5kZXIoJzRhOTM5ZDA1Jywge1xuICAgICAgICByZW5kZXI6IHJlbmRlcixcbiAgICAgICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0aWNSZW5kZXJGbnNcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuY29tcG9uZW50Lm9wdGlvbnMuX19maWxlID0gXCJyZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZVwiXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnQuZXhwb3J0cyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./resources/js/src/app/components/item/VariationSelect.vue\n");

/***/ }),

/***/ "./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helper_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../helper/dom */ \"./resources/js/src/app/helper/dom.js\");\n/* harmony import */ var _helper_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper/utils */ \"./resources/js/src/app/helper/utils.js\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nconst NotificationService = __webpack_require__(/*! ../../services/NotificationService */ \"./resources/js/src/app/services/NotificationService.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n\n    name: \"variation-select\",\n\n    props: {\n        forceContent:\n        {\n            type: Boolean,\n            default: false\n        }\n    },\n\n    inject: {\n        itemId: {\n            default: null\n        }\n    },\n\n    data()\n    {\n        return {\n            filteredVariationsCache: {},\n            lastContentCount: 0\n        };\n    },\n\n    mounted()\n    {\n        // initially check for valid selection and disable add to basket button\n        this.$store.commit(`${this.itemId}/variationSelect/setIsVariationSelected`, !!this.currentSelection);\n    },\n\n    computed:\n    {\n        currentVariation() {\n            return this.$store.getters[`${this.itemId}/currentItemVariation`];\n        },\n\n        currentVariationSelect() {\n            return this.$store.state.items[this.itemId] && this.$store.state.items[this.itemId].variationSelect;\n        },\n\n        /**\n         * returns true if any variation has no attributes\n         */\n        hasEmptyOption()\n        {\n            return this.variations.some(variation => !variation.attributes.length);\n        },\n\n        addPleaseSelectOption()\n        {\n            return App.config.item.showPleaseSelect;\n        },\n\n        /**\n         * returns the variation, based on the selected attributes / unit\n         * returns false if there are none or multiple results\n         */\n        currentSelection()\n        {\n            const filteredVariations = this.filterVariations(null, null, true);\n\n            if (filteredVariations.length === 1)\n            {\n                return filteredVariations[0];\n            }\n\n            return false;\n        },\n\n        /**\n         * returns all units, selectable by current selection\n         * prop 'forceContent' with value true will return all units, without filtering\n         */\n        possibleUnits()\n        {\n            // use an object, to make the entries unique\n            const possibleUnits = {};\n            const variations = this.forceContent ? this.variations : this.filterVariations(null, null, null, true);\n\n            for (const variation of variations)\n            {\n                possibleUnits[variation.unitCombinationId] = variation.unitName;\n            }\n\n            return possibleUnits;\n        },\n\n        possibleUnitCombinationIds()\n        {\n            return this.transformPossibleUnits(this.possibleUnits).map(value => value[0]);\n        },\n\n        isContentVisible()\n        {\n            return !this.forceContent && !!this.currentSelection || this.forceContent;\n        },\n\n        hasSelection()\n        {\n            return !(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(this.selectedAttributes) && !Object.values(this.selectedAttributes).some((value) => value < 0);\n        },\n\n        attributes() {\n            return this.currentVariationSelect && this.currentVariationSelect.attributes;\n        },\n\n        selectedAttributes() {\n            return this.currentVariationSelect && this.currentVariationSelect.selectedAttributes;\n        },\n\n        selectedUnit() {\n            return this.currentVariationSelect && this.currentVariationSelect.selectedUnit;\n        },\n\n        variations() {\n            return this.currentVariationSelect && this.currentVariationSelect.variations;\n        }\n    },\n\n    methods:\n    {\n        /**\n         * select an attribute and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n         * @param {number} attributeId\n         * @param {[number, string, null]} attributeValueId\n         */\n        selectAttribute(attributeId, attributeValueId)\n        {\n            attributeValueId = parseInt(attributeValueId) || null;\n\n            if (this.selectedAttributes[attributeId] !== attributeValueId)\n            {\n                this.$store.commit(`${this.itemId}/variationSelect/selectItemAttribute`, { attributeId, attributeValueId });\n                this.onSelectionChange(attributeId, attributeValueId, null);\n            }\n        },\n\n        /**\n         * select a unit and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n         * @param {[number, string]} unitId\n         */\n        selectUnit(unitId)\n        {\n            unitId = parseInt(unitId);\n            this.$store.commit(`${this.itemId}/variationSelect/selectItemUnit`, unitId);\n            this.onSelectionChange(null, null, unitId);\n        },\n\n        onSelectionChange(attributeId, attributeValueId, unitId)\n        {\n            if (this.currentSelection)\n            {\n                this.setVariation(this.currentSelection.variationId);\n            }\n            else if (!this.hasSelection)\n            {\n                // user switched back to \"please select\"\n                this.setVariation(0);\n            }\n            else\n            {\n                this.unsetInvalidSelection(attributeId, attributeValueId, unitId);\n            }\n\n            this.lastContentCount = this.possibleUnitCombinationIds.length;\n        },\n\n        /**\n         * changes the selected attributes / unit, to ensure a valid seelction\n         * @param {[number, null]} attributeId\n         * @param {[number, null]} attributeValueId\n         * @param {[number, null]} unitId\n         */\n        unsetInvalidSelection(attributeId, attributeValueId, unitId)\n        {\n            const qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId, unitId);\n            const closestVariations = this.getClosestVariations(qualifiedVariations);\n            \n            // if the salable 'closestVariations' is undefined, take the not-salable one\n            const closestVariation = closestVariations[0] || closestVariations[1];\n\n            if (!closestVariation)\n            {\n                return;\n            }\n\n            const invalidSelection = this.getInvalidSelectionByVariation(closestVariation);\n\n            this.correctSelection(invalidSelection);\n        },\n\n        getTooltip(attribute, attributeValue)\n        {\n            if(!this.isAttributeSelectionValid(attribute.attributeId, attributeValue.attributeValueId, true))\n            {\n                return this.getInvalidOptionTooltip(attribute.attributeId, attributeValue.attributeValueId);\n            }\n            else if(attribute.type === \"image\")\n            {\n                return this.$translate(\"Ceres::Template.singleItemAttributeTooltip\", {\n                    attribute: attribute.name,\n                    value: attributeValue.name\n                });\n            }\n\n            return \"\";\n        },\n\n        /**\n         * returns a string for box tooltips, for not available options\n         * @param {number} attributeId\n         * @param {number} attributeValueId\n         */\n        getInvalidOptionTooltip(attributeId, attributeValueId)\n        {\n            const qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId);\n            const closestVariations   = this.getClosestVariations(qualifiedVariations);\n\n            if (!closestVariations || closestVariations.length <= 0)\n            {\n                return \"\";\n            }\n\n            const invalidSelections = [\n                !!closestVariations[0] ? this.getInvalidSelectionByVariation(closestVariations[0]) : null,\n                !!closestVariations[1] ? this.getInvalidSelectionByVariation(closestVariations[1]) : null\n            ];\n\n            if (!!invalidSelections[0]\n                && !!invalidSelections[1]\n                && invalidSelections[0].attributesToReset.length > invalidSelections[1].attributesToReset.length)\n            {\n                // there is a non-salable variation with less changes\n                return this.$translate(\"Ceres::Template.singleItemNotSalable\");\n            }\n\n            const invalidSelection = invalidSelections[0] || invalidSelections[1];\n            const names = [];\n\n            for (const attribute of invalidSelection.attributesToReset)\n            {\n                if (attribute.attributeId !== attributeId)\n                {\n                    names.push(\"<b>\" + attribute.name +\"</b>\");\n                }\n            }\n            if (invalidSelection.newUnit)\n            {\n                names.push(\n                    \"<b>\" + this.$translate(\"Ceres::Template.singleItemContent\") + \"</b>\"\n                );\n            }\n\n            if (!names.length)\n            {\n                return null;\n            }\n\n            return this.$translate(\"Ceres::Template.singleItemNotAvailableInSelection\", { name: names.join(\", \") });\n        },\n\n        /**\n         * returns a list of variations, filtered by attribute or unit\n         * @param {[number, null]} attributeId\n         * @param {[number, null]} attributeValueId\n         * @param {[number, null]} unitId\n         */\n        getQualifiedVariations(attributeId, attributeValueId, unitId)\n        {\n            if ((0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(attributeValueId))\n            {\n                return this.variations.filter(variation =>\n                {\n                    return (0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(variation.attributes.find(attribute =>\n                        attribute.attributeId === attributeId && attribute.attributeValueId === attributeValueId));\n                });\n            }\n            else if ((0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(unitId))\n            {\n                return this.variations.filter(variation => variation.unitCombinationId === unitId);\n            }\n\n            return this.variations.filter(variation => !variation.attributes.length);\n        },\n\n        /**\n         * return a salable and a non-salable variation with the minimum number of changes on attributes compared to the current selection.\n         * @param {array} qualifiedVariations\n         */\n        getClosestVariations(qualifiedVariations)\n        {\n            let closestSalableVariation, numberOfSalableChanges;\n            let closestNonSalableVariation, numberOfNonSalableChanges;\n\n            for (const variation of qualifiedVariations)\n            {\n                let changes = 0;\n\n                if (variation.unitCombinationId !== this.selectedUnit && !(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNull)(this.selectedUnit))\n                {\n                    // when the unit dropdown isn't visible, it should have a lower weight for reset investigations\n                    const unitWeight = this.possibleUnitCombinationIds.length > 1 && this.isContentVisible ? 0.9 : 0.1;\n\n                    changes += unitWeight;\n                }\n\n                for (const attribute of variation.attributes)\n                {\n                    if (this.selectedAttributes[attribute.attributeId] !== attribute.attributeValueId)\n                    {\n                        changes++;\n                    }\n                }\n\n                if(variation.isSalable && (!numberOfSalableChanges || changes < numberOfSalableChanges))\n                {\n                    closestSalableVariation = variation;\n                    numberOfSalableChanges = changes;\n                }\n                else if (!variation.isSalable && (!numberOfNonSalableChanges || changes < numberOfNonSalableChanges))\n                {\n                    closestNonSalableVariation = variation;\n                    numberOfNonSalableChanges = changes;\n                }\n            }\n\n            return [closestSalableVariation, closestNonSalableVariation];\n        },\n\n        /**\n         * returns object with array 'attributesToReset' and newUnit. The attributesToReset contains all attributes, which are not matching with the given variation\n         * @param {object} variation\n         */\n        getInvalidSelectionByVariation(variation)\n        {\n            const attributesToReset = [];\n            let newUnit = null;\n\n            for (let selectedAttributeId in this.selectedAttributes)\n            {\n                selectedAttributeId = parseInt(selectedAttributeId);\n                const variationAttribute = variation.attributes.find(attribute => attribute.attributeId === selectedAttributeId);\n\n                if (!(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNull)(this.selectedAttributes[selectedAttributeId]))\n                {\n                    if (variationAttribute && variationAttribute.attributeValueId !== this.selectedAttributes[selectedAttributeId] || !variationAttribute)\n                    {\n                        const attributeToReset = this.attributes.find(attr => attr.attributeId === selectedAttributeId);\n\n                        attributesToReset.push(attributeToReset);\n                    }\n                }\n            }\n\n            if (variation.unitCombinationId !== this.selectedUnit)\n            {\n                newUnit = variation.unitCombinationId;\n            }\n\n            return { attributesToReset, newUnit };\n        },\n\n        /**\n         * resets all invalid attributes and change the unit, if required. Prints a message to the user if so.\n         * @param {object} invalidSelection\n         */\n        correctSelection(invalidSelection)\n        {\n            const messages   = [];\n            const attributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n\n            for (const attributeToReset of invalidSelection.attributesToReset)\n            {\n                messages.push(\n                    this.$translate(\"Ceres::Template.singleItemNotAvailable\", { name: attributeToReset.name })\n                );\n\n                attributes[attributeToReset.attributeId] = (!this.hasEmptyOption && App.config.item.showPleaseSelect) ? -1 : null;\n            }\n\n            if (invalidSelection.newUnit)\n            {\n                if (this.lastContentCount > 1 && this.possibleUnitCombinationIds.length > 1 && !(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNull)(this.selectedUnit))\n                {\n                    messages.push(\n                        this.$translate(\"Ceres::Template.singleItemNotAvailable\", { name:\n                                this.$translate(\"Ceres::Template.singleItemContent\")\n                        })\n                    );\n                }\n\n                this.$store.commit(`${this.itemId}/variationSelect/selectItemUnit`, invalidSelection.newUnit);\n            }\n\n            this.$store.commit(`${this.itemId}/variationSelect/setItemSelectedAttributes`, attributes);\n\n            this.setVariation(this.currentSelection ? this.currentSelection.variationId : 0);\n\n            NotificationService.warn(\n                messages.join(\"<br>\")\n            ).closeAfter(5000);\n        },\n\n        /**\n         * returns matching variations with current selection\n         * attributes and unitId could be filled, to check a specific selection\n         * @param {object} attributes\n         * @param {number} unitId\n         * @param {boolean} strict\n         */\n        filterVariations(attributes, unitId, strict, ignoreUnit)\n        {\n            attributes = attributes || this.selectedAttributes;\n            unitId = unitId || this.selectedUnit;\n            strict = !!strict;\n            ignoreUnit = !!ignoreUnit;\n\n            const key = JSON.stringify(attributes) + \"_\" + unitId + \"_\" + strict + \"_\" + ignoreUnit;\n\n            if ((0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(this.filteredVariationsCache[key]))\n            {\n                return this.filteredVariationsCache[key];\n            }\n\n            const uniqueValues = [...new Set(Object.values(attributes))];\n            const isEmptyOptionSelected = uniqueValues.length === 1 && (0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNull)(uniqueValues[0]);\n            const filteredVariations = this.variations.filter(variation =>\n            {\n                // the selected unit is not matching\n                if (!ignoreUnit && variation.unitCombinationId !== unitId)\n                {\n                    return false;\n                }\n\n                // the variation has no attributes (only checked, if any attribute has a selected value); or the variation has attributes and empty option is selected\n                // requires more than 0 attributes\n                if (((!isEmptyOptionSelected && !variation.attributes.length) || (isEmptyOptionSelected && variation.attributes.length))\n                    && this.attributes.length > 0)\n                {\n                    return false;\n                }\n\n                for (const attributeId in attributes)\n                {\n                    const variationAttribute = variation.attributes.find(variationAttribute =>\n                        variationAttribute.attributeId === parseInt(attributeId));\n\n                    // an attribute is not matching with selection\n                    if (variationAttribute &&\n                        variationAttribute.attributeValueId !== attributes[attributeId] &&\n                        (strict || !strict && !(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isNull)(attributes[attributeId]) && attributes[attributeId] !== -1))\n                    {\n                        return false;\n                    }\n                }\n\n                return true;\n            });\n\n            this.filteredVariationsCache[key] = filteredVariations;\n\n            return filteredVariations;\n        },\n\n        /**\n         * returns true, if the selection with a new attribute value would be valid\n         * @param {number} attributeId\n         * @param {[number, string, null]} attributeValueId\n         * @param {boolean} filterSalableVariations\n         */\n        isAttributeSelectionValid(attributeId, attributeValueId, filterSalableVariations)\n        {\n            attributeValueId = parseInt(attributeValueId) || null;\n            if (this.selectedAttributes[attributeId] === attributeValueId)\n            {\n                return true;\n            }\n\n            const selectedAttributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n\n            selectedAttributes[attributeId] = parseInt(attributeValueId) || null;\n\n            const ignoreUnit = !(Object.keys(this.possibleUnits).length > 1 && this.isContentVisible);\n            let variations = this.filterVariations(selectedAttributes, null, null, ignoreUnit);\n\n            if (filterSalableVariations)\n            {\n                variations = variations.filter(variation => variation.isSalable)\n            }\n\n            return variations.length > 0;\n        },\n\n        /**\n         * returns true, if the selection with a new unitId would be valid\n         * @param {[number, string]} unitId\n         */\n        isUnitSelectionValid(unitId)\n        {\n            unitId = parseInt(unitId);\n            if (this.selectedUnit === unitId)\n            {\n                return true;\n            }\n\n            return this\n                .filterVariations(null, unitId)\n                .filter(variation => variation.isSalable)\n                .length > 0\n        },\n\n        /**\n         * dispatch vuex action 'loadVariation' to archive a variation\n         * dispatches a custom event named 'onVariationChanged'\n         * @param {[string, number, null]} variationId\n         */\n        setVariation(variationId)\n        {\n            if (!(0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(variationId) && this.currentSelection)\n            {\n                variationId = this.currentSelection.variationId;\n            }\n\n            if ((0,_helper_utils__WEBPACK_IMPORTED_MODULE_1__.isDefined)(variationId))\n            {\n                this.$store.dispatch(`${this.itemId}/loadVariation`, variationId).then(variation =>\n                {\n                    document.dispatchEvent(new CustomEvent(\"onVariationChanged\",\n                        {\n                            detail:\n                                {\n                                    attributes: variation.attributes,\n                                    documents: variation.documents,\n                                    itemId: this.itemId\n                                }\n                        }));\n                });\n            }\n        },\n\n        isTextCut(content)\n        {\n            if (this.$refs.attributesContaner)\n            {\n                return (0,_helper_dom__WEBPACK_IMPORTED_MODULE_0__.textWidth)(content, \"Custom-Font, Helvetica, Arial, sans-serif\") > this.$refs.attributesContaner[0].clientWidth;\n            }\n\n            return false;\n        },\n\n        getSelectedAttributeValueName(attribute)\n        {\n            const selectedAttributeValueId =  this.selectedAttributes[attribute.attributeId];\n            const selectedAttributeValue = attribute.values.find(attrValue => attrValue.attributeValueId === selectedAttributeValueId);\n\n            if (selectedAttributeValue)\n            {\n                return selectedAttributeValue.name;\n            }\n            else if (App.config.item.showPleaseSelect && selectedAttributeValueId === -1)\n            {\n                return this.$translate(\"Ceres::Template.singleItemPleaseSelect\");\n            }\n            return this.$translate(\"Ceres::Template.singleItemNoSelection\");\n        },\n\n        transformPossibleUnits(possibleUnits)\n        {\n            return Object.entries(possibleUnits).sort((unitA, unitB) => {\n                unitA = this.splitUnitName(unitA[1]);\n                unitB = this.splitUnitName(unitB[1]);\n                // order by unit\n                if (unitA[1] < unitB[1]) {\n                    return -1;\n                }\n                if (unitA[1] > unitB[1]) {\n                    return 1;\n                }\n                // order by content (count)\n                if (unitA[0] < unitB[0]) {\n                    return -1;\n                }\n                if (unitA[0] > unitB[0]) {\n                    return 1;\n                }\n                return 0;\n            });\n        },\n        splitUnitName(unitName) {\n            const unitNameSplit = unitName.split(\" \");\n\n            if (!isNaN(unitNameSplit[0])) {\n                unitNameSplit[0] = unitNameSplit[0].replace(App.currencyPattern.separator_thousands, \"\");\n                unitNameSplit[0] = parseInt(unitNameSplit[0]);\n            }\n\n            return unitNameSplit;\n        }\n    },\n\n    watch:\n    {\n        currentSelection(value)\n        {\n            this.$store.commit(`${this.itemId}/variationSelect/setIsVariationSelected`, !!value);\n        },\n        variations()\n        {\n            // FIX unset variation cache after subsequent variations are loaded\n            this.filteredVariationsCache = {};\n        }\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStGNkM7QUFDNkI7O0FBRTFFLDRCQUE0QixtQkFBTyxDQUFDLGtHQUFvQzs7QUFFeEUsK0RBQWU7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixnRUFBaUI7QUFDckM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3REFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdEQUFTO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDBFQUEwRSxxREFBTTtBQUNoRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIscURBQU07QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0dBQWdHLHFEQUFNO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCLHdEQUFTO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVFQUF1RSxxREFBTTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MscURBQU07QUFDckQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0RBQVM7QUFDMUI7QUFDQTtBQUNBOztBQUVBLGdCQUFnQix3REFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQVM7QUFDaEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9DZXJlcy9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT8xNDQ3Il0sInNvdXJjZXNDb250ZW50IjpbIjx0ZW1wbGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiYXR0cmlidXRlcy5sZW5ndGggfHwgKHBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aCA+IDEgJiYgaXNDb250ZW50VmlzaWJsZSlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgdmFyaWF0aW9uLXNlbGVjdFwiIHYtZm9yPVwiKGF0dHJpYnV0ZSwgaW5kZXgpIGluIGF0dHJpYnV0ZXNcIiA6a2V5PVwiaW5kZXhcIj5cbiAgICAgICAgICAgICAgICA8IS0tIGRyb3Bkb3duIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC11bml0XCIgcmVmPVwiYXR0cmlidXRlc0NvbnRhbmVyXCIgdi1pZj1cImF0dHJpYnV0ZS50eXBlID09PSAnZHJvcGRvd24nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgOmlkPVwiJ2N1c3RvbS1zZWxlY3RfJyArIGF0dHJpYnV0ZS5uYW1lXCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0XCIgQGNoYW5nZT1cInNlbGVjdEF0dHJpYnV0ZShhdHRyaWJ1dGUuYXR0cmlidXRlSWQsICRldmVudC50YXJnZXQudmFsdWUpXCIgZGF0YS10ZXN0aW5nPVwidmFyaWF0aW9uLXNlbGVjdC1kcm9wZG93blwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiA6dmFsdWU9XCItMVwiIHYtaWY9XCJhZGRQbGVhc2VTZWxlY3RPcHRpb24gfHwgIWhhc1NlbGVjdGlvblwiPnt7ICR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbVBsZWFzZVNlbGVjdFwiKSB9fTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6dmFsdWU9XCJudWxsXCIgdi1pZj1cImhhc0VtcHR5T3B0aW9uIHx8IHNlbGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGUuYXR0cmlidXRlSWRdID09PSBudWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOnNlbGVjdGVkPVwic2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0gPT09IG51bGxcIj57eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob1NlbGVjdGlvblwiKSB9fTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LWZvcj1cInZhbHVlIGluIGF0dHJpYnV0ZS52YWx1ZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6dmFsdWU9XCJ2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOnNlbGVjdGVkPVwidmFsdWUuYXR0cmlidXRlVmFsdWVJZCA9PT0gc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6a2V5PVwidmFsdWUuYXR0cmlidXRlVmFsdWVJZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsIHRydWUpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHZhbHVlLm5hbWUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2UtaWY9XCJpc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCwgZmFsc2UpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7ICR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vdFNhbGFibGVBdHRyaWJ1dGVcIiwgeyBcIm5hbWVcIjogdmFsdWUubmFtZSB9KSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtSW52YWxpZEF0dHJpYnV0ZVwiLCB7IFwibmFtZVwiOiB2YWx1ZS5uYW1lIH0pIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDpmb3I9XCInY3VzdG9tLXNlbGVjdF8nICsgYXR0cmlidXRlLm5hbWVcIiB2LXRvb2x0aXA9XCJpc1RleHRDdXQoYXR0cmlidXRlLm5hbWUpXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIiA6dGl0bGU9XCJhdHRyaWJ1dGUubmFtZVwiIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtZHJvcGRvd24tbGFiZWxcIj57eyBhdHRyaWJ1dGUubmFtZSB9fTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLSAvZHJvcGRvd24gLS0+XG5cbiAgICAgICAgICAgICAgICA8IS0tIGJveCBhbmQgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiB2LWVsc2UtaWY9XCJhdHRyaWJ1dGUudHlwZSA9PT0gJ2JveCcgfHwgYXR0cmlidXRlLnR5cGUgPT09ICdpbWFnZSdcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LW11dGVkXCIgZGF0YS10ZXN0aW5nPVwiYXR0cmlidXRlLW5hbWVcIj57eyBhdHRyaWJ1dGUubmFtZSB9fTo8L3NwYW4+IDxiIGRhdGEtdGVzdGluZz1cImF0dHJpYnV0ZS12YWx1ZVwiPnt7IGdldFNlbGVjdGVkQXR0cmlidXRlVmFsdWVOYW1lKGF0dHJpYnV0ZSkgfX08L2I+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2LXMtYm94ZXMgcHktM1wiIDpjbGFzcz1cInsgJ2ltYWdlcyc6IGF0dHJpYnV0ZS50eXBlID09PSAnaW1hZ2UnIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2LXMtYm94IGJnLXdoaXRlIGVtcHR5LW9wdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1pZj1cImFkZFBsZWFzZVNlbGVjdE9wdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cInNlbGVjdEF0dHJpYnV0ZShhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIC0xKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpjbGFzcz1cInsgJ2FjdGl2ZSc6IHNlbGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGUuYXR0cmlidXRlSWRdID09PSAtMSwgJ2ludmFsaWQnOiAhaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIC0xKSB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJteC0zXCI+e3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtUGxlYXNlU2VsZWN0XCIpIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidi1zLWJveCBiZy13aGl0ZSBlbXB0eS1vcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Rpbmc9XCJ2YXJpYXRpb24tc2VsZWN0LWJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtaWY9XCJoYXNFbXB0eU9wdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cInNlbGVjdEF0dHJpYnV0ZShhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIG51bGwpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOmNsYXNzPVwieyAnYWN0aXZlJzogc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0gPT09IG51bGwsICdpbnZhbGlkJzogIWlzQXR0cmlidXRlU2VsZWN0aW9uVmFsaWQoYXR0cmlidXRlLmF0dHJpYnV0ZUlkLCBudWxsLCB0cnVlKSB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJteC0zXCI+e3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm9TZWxlY3Rpb25cIikgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInYtcy1ib3ggYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Rpbmc9XCJ2YXJpYXRpb24tc2VsZWN0LWJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtZm9yPVwidmFsdWUgaW4gYXR0cmlidXRlLnZhbHVlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cInNlbGVjdEF0dHJpYnV0ZShhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOmNsYXNzPVwieyAnYWN0aXZlJzogdmFsdWUuYXR0cmlidXRlVmFsdWVJZCA9PT0gc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0sICdpbnZhbGlkJzogIWlzQXR0cmlidXRlU2VsZWN0aW9uVmFsaWQoYXR0cmlidXRlLmF0dHJpYnV0ZUlkLCB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkLCB0cnVlKSB9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi10b29sdGlwPVwidHJ1ZVwiIGRhdGEtaHRtbD1cInRydWVcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIDpkYXRhLW9yaWdpbmFsLXRpdGxlPVwiZ2V0VG9vbHRpcChhdHRyaWJ1dGUsIHZhbHVlKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDprZXk9XCJ2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJteC0zXCIgdi1pZj1cImF0dHJpYnV0ZS50eXBlID09PSAnYm94J1wiPnt7IHZhbHVlLm5hbWUgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInAtMVwiIHYtZWxzZSA6c3JjPVwidmFsdWUuaW1hZ2VVcmxcIiA6YWx0PVwidmFsdWUubmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwhLS0gL2JveCBhbmQgaW1hZ2UgLS0+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSB1bml0cyAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgdmFyaWF0aW9uLXNlbGVjdFwiIHYtaWY9XCJwb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGggPiAxICYmIGlzQ29udGVudFZpc2libGVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtdW5pdFwiPlxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwidW5pdC1jb21iaW5hdGlvbi1pZHMtc2VsZWN0XCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0XCIgQGNoYW5nZT1cInNlbGVjdFVuaXQoJGV2ZW50LnRhcmdldC52YWx1ZSlcIiBkYXRhLXRlc3Rpbmc9XCJ2YXJpYXRpb24tc2VsZWN0LXVuaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1mb3I9XCJ1bml0Q29tYmluYXRpb25JZCBpbiBwb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cInVuaXRDb21iaW5hdGlvbklkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOnNlbGVjdGVkPVwicGFyc2VJbnQodW5pdENvbWJpbmF0aW9uSWQpID09PSBzZWxlY3RlZFVuaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6a2V5PVwidW5pdENvbWJpbmF0aW9uSWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cImlzVW5pdFNlbGVjdGlvblZhbGlkKHVuaXRDb21iaW5hdGlvbklkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBwb3NzaWJsZVVuaXRzW3VuaXRDb21iaW5hdGlvbklkXSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtSW52YWxpZEF0dHJpYnV0ZVwiLCB7IFwibmFtZVwiOiBwb3NzaWJsZVVuaXRzW3VuaXRDb21iaW5hdGlvbklkXSB9KSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ1bml0LWNvbWJpbmF0aW9uLWlkcy1zZWxlY3RcIiBkYXRhLXRlc3Rpbmc9XCJ2YXJpYXRpb24tc2VsZWN0LXVuaXQtbGFiZWxcIj57eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Db250ZW50XCIpIH19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCEtLSAvdW5pdHMgLS0+XG4gICAgICAgIDwvdGVtcGxhdGU+XG5cbiAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgeyB0ZXh0V2lkdGggfSBmcm9tIFwiLi4vLi4vaGVscGVyL2RvbVwiO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc051bGwsIGlzTnVsbE9yVW5kZWZpbmVkIH0gZnJvbSBcIi4uLy4uL2hlbHBlci91dGlsc1wiO1xuXG5jb25zdCBOb3RpZmljYXRpb25TZXJ2aWNlID0gcmVxdWlyZShcIi4uLy4uL3NlcnZpY2VzL05vdGlmaWNhdGlvblNlcnZpY2VcIik7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAgIG5hbWU6IFwidmFyaWF0aW9uLXNlbGVjdFwiLFxuXG4gICAgcHJvcHM6IHtcbiAgICAgICAgZm9yY2VDb250ZW50OlxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmplY3Q6IHtcbiAgICAgICAgaXRlbUlkOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGF0YSgpXG4gICAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsdGVyZWRWYXJpYXRpb25zQ2FjaGU6IHt9LFxuICAgICAgICAgICAgbGFzdENvbnRlbnRDb3VudDogMFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBtb3VudGVkKClcbiAgICB7XG4gICAgICAgIC8vIGluaXRpYWxseSBjaGVjayBmb3IgdmFsaWQgc2VsZWN0aW9uIGFuZCBkaXNhYmxlIGFkZCB0byBiYXNrZXQgYnV0dG9uXG4gICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgJHt0aGlzLml0ZW1JZH0vdmFyaWF0aW9uU2VsZWN0L3NldElzVmFyaWF0aW9uU2VsZWN0ZWRgLCAhIXRoaXMuY3VycmVudFNlbGVjdGlvbik7XG4gICAgfSxcblxuICAgIGNvbXB1dGVkOlxuICAgIHtcbiAgICAgICAgY3VycmVudFZhcmlhdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2Ake3RoaXMuaXRlbUlkfS9jdXJyZW50SXRlbVZhcmlhdGlvbmBdO1xuICAgICAgICB9LFxuXG4gICAgICAgIGN1cnJlbnRWYXJpYXRpb25TZWxlY3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuaXRlbXNbdGhpcy5pdGVtSWRdICYmIHRoaXMuJHN0b3JlLnN0YXRlLml0ZW1zW3RoaXMuaXRlbUlkXS52YXJpYXRpb25TZWxlY3Q7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgdHJ1ZSBpZiBhbnkgdmFyaWF0aW9uIGhhcyBubyBhdHRyaWJ1dGVzXG4gICAgICAgICAqL1xuICAgICAgICBoYXNFbXB0eU9wdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhcmlhdGlvbnMuc29tZSh2YXJpYXRpb24gPT4gIXZhcmlhdGlvbi5hdHRyaWJ1dGVzLmxlbmd0aCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkUGxlYXNlU2VsZWN0T3B0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIEFwcC5jb25maWcuaXRlbS5zaG93UGxlYXNlU2VsZWN0O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIHRoZSB2YXJpYXRpb24sIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGVzIC8gdW5pdFxuICAgICAgICAgKiByZXR1cm5zIGZhbHNlIGlmIHRoZXJlIGFyZSBub25lIG9yIG11bHRpcGxlIHJlc3VsdHNcbiAgICAgICAgICovXG4gICAgICAgIGN1cnJlbnRTZWxlY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFZhcmlhdGlvbnMgPSB0aGlzLmZpbHRlclZhcmlhdGlvbnMobnVsbCwgbnVsbCwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZFZhcmlhdGlvbnMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZFZhcmlhdGlvbnNbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJucyBhbGwgdW5pdHMsIHNlbGVjdGFibGUgYnkgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICogcHJvcCAnZm9yY2VDb250ZW50JyB3aXRoIHZhbHVlIHRydWUgd2lsbCByZXR1cm4gYWxsIHVuaXRzLCB3aXRob3V0IGZpbHRlcmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgcG9zc2libGVVbml0cygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHVzZSBhbiBvYmplY3QsIHRvIG1ha2UgdGhlIGVudHJpZXMgdW5pcXVlXG4gICAgICAgICAgICBjb25zdCBwb3NzaWJsZVVuaXRzID0ge307XG4gICAgICAgICAgICBjb25zdCB2YXJpYXRpb25zID0gdGhpcy5mb3JjZUNvbnRlbnQgPyB0aGlzLnZhcmlhdGlvbnMgOiB0aGlzLmZpbHRlclZhcmlhdGlvbnMobnVsbCwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFyaWF0aW9uIG9mIHZhcmlhdGlvbnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcG9zc2libGVVbml0c1t2YXJpYXRpb24udW5pdENvbWJpbmF0aW9uSWRdID0gdmFyaWF0aW9uLnVuaXROYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVVbml0cztcbiAgICAgICAgfSxcblxuICAgICAgICBwb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVBvc3NpYmxlVW5pdHModGhpcy5wb3NzaWJsZVVuaXRzKS5tYXAodmFsdWUgPT4gdmFsdWVbMF0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGlzQ29udGVudFZpc2libGUoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuZm9yY2VDb250ZW50ICYmICEhdGhpcy5jdXJyZW50U2VsZWN0aW9uIHx8IHRoaXMuZm9yY2VDb250ZW50O1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc1NlbGVjdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXMpICYmICFPYmplY3QudmFsdWVzKHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzKS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgPCAwKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhdHRyaWJ1dGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdCAmJiB0aGlzLmN1cnJlbnRWYXJpYXRpb25TZWxlY3QuYXR0cmlidXRlcztcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0ICYmIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdC5zZWxlY3RlZEF0dHJpYnV0ZXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0ZWRVbml0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdCAmJiB0aGlzLmN1cnJlbnRWYXJpYXRpb25TZWxlY3Quc2VsZWN0ZWRVbml0O1xuICAgICAgICB9LFxuXG4gICAgICAgIHZhcmlhdGlvbnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0ICYmIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdC52YXJpYXRpb25zO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1ldGhvZHM6XG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogc2VsZWN0IGFuIGF0dHJpYnV0ZSBhbmQgY2hlY2ssIGlmIHRoZSBzZWxlY3Rpb24gaXMgdmFsaWQ7IGlmIG5vdCwgdW5zZXRJbnZhbGlkU2VsZWN0aW9uIHdpbGwgYmUgZXhlY3V0ZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGF0dHJpYnV0ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgc3RyaW5nLCBudWxsXX0gYXR0cmlidXRlVmFsdWVJZFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QXR0cmlidXRlKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkKVxuICAgICAgICB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVWYWx1ZUlkID0gcGFyc2VJbnQoYXR0cmlidXRlVmFsdWVJZCkgfHwgbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZUlkXSAhPT0gYXR0cmlidXRlVmFsdWVJZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoYCR7dGhpcy5pdGVtSWR9L3ZhcmlhdGlvblNlbGVjdC9zZWxlY3RJdGVtQXR0cmlidXRlYCwgeyBhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2VsZWN0IGEgdW5pdCBhbmQgY2hlY2ssIGlmIHRoZSBzZWxlY3Rpb24gaXMgdmFsaWQ7IGlmIG5vdCwgdW5zZXRJbnZhbGlkU2VsZWN0aW9uIHdpbGwgYmUgZXhlY3V0ZWRcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBzdHJpbmddfSB1bml0SWRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGVjdFVuaXQodW5pdElkKVxuICAgICAgICB7XG4gICAgICAgICAgICB1bml0SWQgPSBwYXJzZUludCh1bml0SWQpO1xuICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGAke3RoaXMuaXRlbUlkfS92YXJpYXRpb25TZWxlY3Qvc2VsZWN0SXRlbVVuaXRgLCB1bml0SWQpO1xuICAgICAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZShudWxsLCBudWxsLCB1bml0SWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCB1bml0SWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWxlY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYXJpYXRpb24odGhpcy5jdXJyZW50U2VsZWN0aW9uLnZhcmlhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmhhc1NlbGVjdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB1c2VyIHN3aXRjaGVkIGJhY2sgdG8gXCJwbGVhc2Ugc2VsZWN0XCJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhcmlhdGlvbigwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc2V0SW52YWxpZFNlbGVjdGlvbihhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCwgdW5pdElkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5sYXN0Q29udGVudENvdW50ID0gdGhpcy5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZXMgdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZXMgLyB1bml0LCB0byBlbnN1cmUgYSB2YWxpZCBzZWVsY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBudWxsXX0gYXR0cmlidXRlSWRcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBudWxsXX0gYXR0cmlidXRlVmFsdWVJZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bGxdfSB1bml0SWRcbiAgICAgICAgICovXG4gICAgICAgIHVuc2V0SW52YWxpZFNlbGVjdGlvbihhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCwgdW5pdElkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBxdWFsaWZpZWRWYXJpYXRpb25zID0gdGhpcy5nZXRRdWFsaWZpZWRWYXJpYXRpb25zKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCB1bml0SWQpO1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFZhcmlhdGlvbnMgPSB0aGlzLmdldENsb3Nlc3RWYXJpYXRpb25zKHF1YWxpZmllZFZhcmlhdGlvbnMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBpZiB0aGUgc2FsYWJsZSAnY2xvc2VzdFZhcmlhdGlvbnMnIGlzIHVuZGVmaW5lZCwgdGFrZSB0aGUgbm90LXNhbGFibGUgb25lXG4gICAgICAgICAgICBjb25zdCBjbG9zZXN0VmFyaWF0aW9uID0gY2xvc2VzdFZhcmlhdGlvbnNbMF0gfHwgY2xvc2VzdFZhcmlhdGlvbnNbMV07XG5cbiAgICAgICAgICAgIGlmICghY2xvc2VzdFZhcmlhdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRTZWxlY3Rpb24gPSB0aGlzLmdldEludmFsaWRTZWxlY3Rpb25CeVZhcmlhdGlvbihjbG9zZXN0VmFyaWF0aW9uKTtcblxuICAgICAgICAgICAgdGhpcy5jb3JyZWN0U2VsZWN0aW9uKGludmFsaWRTZWxlY3Rpb24pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFRvb2x0aXAoYXR0cmlidXRlLCBhdHRyaWJ1dGVWYWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoIXRoaXMuaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIGF0dHJpYnV0ZVZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsIHRydWUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEludmFsaWRPcHRpb25Ub29sdGlwKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWUuYXR0cmlidXRlVmFsdWVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGF0dHJpYnV0ZS50eXBlID09PSBcImltYWdlXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtQXR0cmlidXRlVG9vbHRpcFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhdHRyaWJ1dGVWYWx1ZS5uYW1lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIGEgc3RyaW5nIGZvciBib3ggdG9vbHRpcHMsIGZvciBub3QgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGF0dHJpYnV0ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdHRyaWJ1dGVWYWx1ZUlkXG4gICAgICAgICAqL1xuICAgICAgICBnZXRJbnZhbGlkT3B0aW9uVG9vbHRpcChhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcXVhbGlmaWVkVmFyaWF0aW9ucyA9IHRoaXMuZ2V0UXVhbGlmaWVkVmFyaWF0aW9ucyhhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCk7XG4gICAgICAgICAgICBjb25zdCBjbG9zZXN0VmFyaWF0aW9ucyAgID0gdGhpcy5nZXRDbG9zZXN0VmFyaWF0aW9ucyhxdWFsaWZpZWRWYXJpYXRpb25zKTtcblxuICAgICAgICAgICAgaWYgKCFjbG9zZXN0VmFyaWF0aW9ucyB8fCBjbG9zZXN0VmFyaWF0aW9ucy5sZW5ndGggPD0gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW52YWxpZFNlbGVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgISFjbG9zZXN0VmFyaWF0aW9uc1swXSA/IHRoaXMuZ2V0SW52YWxpZFNlbGVjdGlvbkJ5VmFyaWF0aW9uKGNsb3Nlc3RWYXJpYXRpb25zWzBdKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgISFjbG9zZXN0VmFyaWF0aW9uc1sxXSA/IHRoaXMuZ2V0SW52YWxpZFNlbGVjdGlvbkJ5VmFyaWF0aW9uKGNsb3Nlc3RWYXJpYXRpb25zWzFdKSA6IG51bGxcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmICghIWludmFsaWRTZWxlY3Rpb25zWzBdXG4gICAgICAgICAgICAgICAgJiYgISFpbnZhbGlkU2VsZWN0aW9uc1sxXVxuICAgICAgICAgICAgICAgICYmIGludmFsaWRTZWxlY3Rpb25zWzBdLmF0dHJpYnV0ZXNUb1Jlc2V0Lmxlbmd0aCA+IGludmFsaWRTZWxlY3Rpb25zWzFdLmF0dHJpYnV0ZXNUb1Jlc2V0Lmxlbmd0aClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBhIG5vbi1zYWxhYmxlIHZhcmlhdGlvbiB3aXRoIGxlc3MgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vdFNhbGFibGVcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRTZWxlY3Rpb24gPSBpbnZhbGlkU2VsZWN0aW9uc1swXSB8fCBpbnZhbGlkU2VsZWN0aW9uc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gW107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGludmFsaWRTZWxlY3Rpb24uYXR0cmlidXRlc1RvUmVzZXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCAhPT0gYXR0cmlidXRlSWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKFwiPGI+XCIgKyBhdHRyaWJ1dGUubmFtZSArXCI8L2I+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnZhbGlkU2VsZWN0aW9uLm5ld1VuaXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgXCI8Yj5cIiArIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtQ29udGVudFwiKSArIFwiPC9iPlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFuYW1lcy5sZW5ndGgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLiR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vdEF2YWlsYWJsZUluU2VsZWN0aW9uXCIsIHsgbmFtZTogbmFtZXMuam9pbihcIiwgXCIpIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIGEgbGlzdCBvZiB2YXJpYXRpb25zLCBmaWx0ZXJlZCBieSBhdHRyaWJ1dGUgb3IgdW5pdFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bGxdfSBhdHRyaWJ1dGVJZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bGxdfSBhdHRyaWJ1dGVWYWx1ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgbnVsbF19IHVuaXRJZFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0UXVhbGlmaWVkVmFyaWF0aW9ucyhhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCwgdW5pdElkKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKGF0dHJpYnV0ZVZhbHVlSWQpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhcmlhdGlvbnMuZmlsdGVyKHZhcmlhdGlvbiA9PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZCh2YXJpYXRpb24uYXR0cmlidXRlcy5maW5kKGF0dHJpYnV0ZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkID09PSBhdHRyaWJ1dGVJZCAmJiBhdHRyaWJ1dGUuYXR0cmlidXRlVmFsdWVJZCA9PT0gYXR0cmlidXRlVmFsdWVJZCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZWZpbmVkKHVuaXRJZCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFyaWF0aW9ucy5maWx0ZXIodmFyaWF0aW9uID0+IHZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZCA9PT0gdW5pdElkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFyaWF0aW9ucy5maWx0ZXIodmFyaWF0aW9uID0+ICF2YXJpYXRpb24uYXR0cmlidXRlcy5sZW5ndGgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm4gYSBzYWxhYmxlIGFuZCBhIG5vbi1zYWxhYmxlIHZhcmlhdGlvbiB3aXRoIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFuZ2VzIG9uIGF0dHJpYnV0ZXMgY29tcGFyZWQgdG8gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgICAgICAgKiBAcGFyYW0ge2FycmF5fSBxdWFsaWZpZWRWYXJpYXRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBnZXRDbG9zZXN0VmFyaWF0aW9ucyhxdWFsaWZpZWRWYXJpYXRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgY2xvc2VzdFNhbGFibGVWYXJpYXRpb24sIG51bWJlck9mU2FsYWJsZUNoYW5nZXM7XG4gICAgICAgICAgICBsZXQgY2xvc2VzdE5vblNhbGFibGVWYXJpYXRpb24sIG51bWJlck9mTm9uU2FsYWJsZUNoYW5nZXM7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFyaWF0aW9uIG9mIHF1YWxpZmllZFZhcmlhdGlvbnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZCAhPT0gdGhpcy5zZWxlY3RlZFVuaXQgJiYgIWlzTnVsbCh0aGlzLnNlbGVjdGVkVW5pdCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSB1bml0IGRyb3Bkb3duIGlzbid0IHZpc2libGUsIGl0IHNob3VsZCBoYXZlIGEgbG93ZXIgd2VpZ2h0IGZvciByZXNldCBpbnZlc3RpZ2F0aW9uc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bml0V2VpZ2h0ID0gdGhpcy5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGggPiAxICYmIHRoaXMuaXNDb250ZW50VmlzaWJsZSA/IDAuOSA6IDAuMTtcblxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzICs9IHVuaXRXZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdmFyaWF0aW9uLmF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXSAhPT0gYXR0cmlidXRlLmF0dHJpYnV0ZVZhbHVlSWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHZhcmlhdGlvbi5pc1NhbGFibGUgJiYgKCFudW1iZXJPZlNhbGFibGVDaGFuZ2VzIHx8IGNoYW5nZXMgPCBudW1iZXJPZlNhbGFibGVDaGFuZ2VzKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RTYWxhYmxlVmFyaWF0aW9uID0gdmFyaWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNhbGFibGVDaGFuZ2VzID0gY2hhbmdlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXZhcmlhdGlvbi5pc1NhbGFibGUgJiYgKCFudW1iZXJPZk5vblNhbGFibGVDaGFuZ2VzIHx8IGNoYW5nZXMgPCBudW1iZXJPZk5vblNhbGFibGVDaGFuZ2VzKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3ROb25TYWxhYmxlVmFyaWF0aW9uID0gdmFyaWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBudW1iZXJPZk5vblNhbGFibGVDaGFuZ2VzID0gY2hhbmdlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBbY2xvc2VzdFNhbGFibGVWYXJpYXRpb24sIGNsb3Nlc3ROb25TYWxhYmxlVmFyaWF0aW9uXTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJucyBvYmplY3Qgd2l0aCBhcnJheSAnYXR0cmlidXRlc1RvUmVzZXQnIGFuZCBuZXdVbml0LiBUaGUgYXR0cmlidXRlc1RvUmVzZXQgY29udGFpbnMgYWxsIGF0dHJpYnV0ZXMsIHdoaWNoIGFyZSBub3QgbWF0Y2hpbmcgd2l0aCB0aGUgZ2l2ZW4gdmFyaWF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YXJpYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIGdldEludmFsaWRTZWxlY3Rpb25CeVZhcmlhdGlvbih2YXJpYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXNUb1Jlc2V0ID0gW107XG4gICAgICAgICAgICBsZXQgbmV3VW5pdCA9IG51bGw7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHNlbGVjdGVkQXR0cmlidXRlSWQgaW4gdGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRBdHRyaWJ1dGVJZCA9IHBhcnNlSW50KHNlbGVjdGVkQXR0cmlidXRlSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhdGlvbkF0dHJpYnV0ZSA9IHZhcmlhdGlvbi5hdHRyaWJ1dGVzLmZpbmQoYXR0cmlidXRlID0+IGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCA9PT0gc2VsZWN0ZWRBdHRyaWJ1dGVJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbCh0aGlzLnNlbGVjdGVkQXR0cmlidXRlc1tzZWxlY3RlZEF0dHJpYnV0ZUlkXSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uQXR0cmlidXRlICYmIHZhcmlhdGlvbkF0dHJpYnV0ZS5hdHRyaWJ1dGVWYWx1ZUlkICE9PSB0aGlzLnNlbGVjdGVkQXR0cmlidXRlc1tzZWxlY3RlZEF0dHJpYnV0ZUlkXSB8fCAhdmFyaWF0aW9uQXR0cmlidXRlKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVUb1Jlc2V0ID0gdGhpcy5hdHRyaWJ1dGVzLmZpbmQoYXR0ciA9PiBhdHRyLmF0dHJpYnV0ZUlkID09PSBzZWxlY3RlZEF0dHJpYnV0ZUlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1RvUmVzZXQucHVzaChhdHRyaWJ1dGVUb1Jlc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZCAhPT0gdGhpcy5zZWxlY3RlZFVuaXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmV3VW5pdCA9IHZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgYXR0cmlidXRlc1RvUmVzZXQsIG5ld1VuaXQgfTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVzZXRzIGFsbCBpbnZhbGlkIGF0dHJpYnV0ZXMgYW5kIGNoYW5nZSB0aGUgdW5pdCwgaWYgcmVxdWlyZWQuIFByaW50cyBhIG1lc3NhZ2UgdG8gdGhlIHVzZXIgaWYgc28uXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpbnZhbGlkU2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBjb3JyZWN0U2VsZWN0aW9uKGludmFsaWRTZWxlY3Rpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzICAgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzKSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlVG9SZXNldCBvZiBpbnZhbGlkU2VsZWN0aW9uLmF0dHJpYnV0ZXNUb1Jlc2V0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90QXZhaWxhYmxlXCIsIHsgbmFtZTogYXR0cmlidXRlVG9SZXNldC5uYW1lIH0pXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0cmlidXRlVG9SZXNldC5hdHRyaWJ1dGVJZF0gPSAoIXRoaXMuaGFzRW1wdHlPcHRpb24gJiYgQXBwLmNvbmZpZy5pdGVtLnNob3dQbGVhc2VTZWxlY3QpID8gLTEgOiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW52YWxpZFNlbGVjdGlvbi5uZXdVbml0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RDb250ZW50Q291bnQgPiAxICYmIHRoaXMucG9zc2libGVVbml0Q29tYmluYXRpb25JZHMubGVuZ3RoID4gMSAmJiAhaXNOdWxsKHRoaXMuc2VsZWN0ZWRVbml0KSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vdEF2YWlsYWJsZVwiLCB7IG5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtQ29udGVudFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoYCR7dGhpcy5pdGVtSWR9L3ZhcmlhdGlvblNlbGVjdC9zZWxlY3RJdGVtVW5pdGAsIGludmFsaWRTZWxlY3Rpb24ubmV3VW5pdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgJHt0aGlzLml0ZW1JZH0vdmFyaWF0aW9uU2VsZWN0L3NldEl0ZW1TZWxlY3RlZEF0dHJpYnV0ZXNgLCBhdHRyaWJ1dGVzKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRWYXJpYXRpb24odGhpcy5jdXJyZW50U2VsZWN0aW9uID8gdGhpcy5jdXJyZW50U2VsZWN0aW9uLnZhcmlhdGlvbklkIDogMCk7XG5cbiAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2Uud2FybihcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5qb2luKFwiPGJyPlwiKVxuICAgICAgICAgICAgKS5jbG9zZUFmdGVyKDUwMDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIG1hdGNoaW5nIHZhcmlhdGlvbnMgd2l0aCBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgKiBhdHRyaWJ1dGVzIGFuZCB1bml0SWQgY291bGQgYmUgZmlsbGVkLCB0byBjaGVjayBhIHNwZWNpZmljIHNlbGVjdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYXR0cmlidXRlc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdW5pdElkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0XG4gICAgICAgICAqL1xuICAgICAgICBmaWx0ZXJWYXJpYXRpb25zKGF0dHJpYnV0ZXMsIHVuaXRJZCwgc3RyaWN0LCBpZ25vcmVVbml0KVxuICAgICAgICB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcyB8fCB0aGlzLnNlbGVjdGVkQXR0cmlidXRlcztcbiAgICAgICAgICAgIHVuaXRJZCA9IHVuaXRJZCB8fCB0aGlzLnNlbGVjdGVkVW5pdDtcbiAgICAgICAgICAgIHN0cmljdCA9ICEhc3RyaWN0O1xuICAgICAgICAgICAgaWdub3JlVW5pdCA9ICEhaWdub3JlVW5pdDtcblxuICAgICAgICAgICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoYXR0cmlidXRlcykgKyBcIl9cIiArIHVuaXRJZCArIFwiX1wiICsgc3RyaWN0ICsgXCJfXCIgKyBpZ25vcmVVbml0O1xuXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHRoaXMuZmlsdGVyZWRWYXJpYXRpb25zQ2FjaGVba2V5XSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyZWRWYXJpYXRpb25zQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVmFsdWVzID0gWy4uLm5ldyBTZXQoT2JqZWN0LnZhbHVlcyhhdHRyaWJ1dGVzKSldO1xuICAgICAgICAgICAgY29uc3QgaXNFbXB0eU9wdGlvblNlbGVjdGVkID0gdW5pcXVlVmFsdWVzLmxlbmd0aCA9PT0gMSAmJiBpc051bGwodW5pcXVlVmFsdWVzWzBdKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkVmFyaWF0aW9ucyA9IHRoaXMudmFyaWF0aW9ucy5maWx0ZXIodmFyaWF0aW9uID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlbGVjdGVkIHVuaXQgaXMgbm90IG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgaWYgKCFpZ25vcmVVbml0ICYmIHZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZCAhPT0gdW5pdElkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHRoZSB2YXJpYXRpb24gaGFzIG5vIGF0dHJpYnV0ZXMgKG9ubHkgY2hlY2tlZCwgaWYgYW55IGF0dHJpYnV0ZSBoYXMgYSBzZWxlY3RlZCB2YWx1ZSk7IG9yIHRoZSB2YXJpYXRpb24gaGFzIGF0dHJpYnV0ZXMgYW5kIGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIC8vIHJlcXVpcmVzIG1vcmUgdGhhbiAwIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICBpZiAoKCghaXNFbXB0eU9wdGlvblNlbGVjdGVkICYmICF2YXJpYXRpb24uYXR0cmlidXRlcy5sZW5ndGgpIHx8IChpc0VtcHR5T3B0aW9uU2VsZWN0ZWQgJiYgdmFyaWF0aW9uLmF0dHJpYnV0ZXMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5hdHRyaWJ1dGVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVJZCBpbiBhdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWF0aW9uQXR0cmlidXRlID0gdmFyaWF0aW9uLmF0dHJpYnV0ZXMuZmluZCh2YXJpYXRpb25BdHRyaWJ1dGUgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhdGlvbkF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCA9PT0gcGFyc2VJbnQoYXR0cmlidXRlSWQpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhbiBhdHRyaWJ1dGUgaXMgbm90IG1hdGNoaW5nIHdpdGggc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYXRpb25BdHRyaWJ1dGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhdGlvbkF0dHJpYnV0ZS5hdHRyaWJ1dGVWYWx1ZUlkICE9PSBhdHRyaWJ1dGVzW2F0dHJpYnV0ZUlkXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHN0cmljdCB8fCAhc3RyaWN0ICYmICFpc051bGwoYXR0cmlidXRlc1thdHRyaWJ1dGVJZF0pICYmIGF0dHJpYnV0ZXNbYXR0cmlidXRlSWRdICE9PSAtMSkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRWYXJpYXRpb25zQ2FjaGVba2V5XSA9IGZpbHRlcmVkVmFyaWF0aW9ucztcblxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkVmFyaWF0aW9ucztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJucyB0cnVlLCBpZiB0aGUgc2VsZWN0aW9uIHdpdGggYSBuZXcgYXR0cmlidXRlIHZhbHVlIHdvdWxkIGJlIHZhbGlkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdHRyaWJ1dGVJZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIHN0cmluZywgbnVsbF19IGF0dHJpYnV0ZVZhbHVlSWRcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBmaWx0ZXJTYWxhYmxlVmFyaWF0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWVJZCwgZmlsdGVyU2FsYWJsZVZhcmlhdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZVZhbHVlSWQgPSBwYXJzZUludChhdHRyaWJ1dGVWYWx1ZUlkKSB8fCBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZUlkXSA9PT0gYXR0cmlidXRlVmFsdWVJZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRBdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdGVkQXR0cmlidXRlcykpO1xuXG4gICAgICAgICAgICBzZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlSWRdID0gcGFyc2VJbnQoYXR0cmlidXRlVmFsdWVJZCkgfHwgbnVsbDtcblxuICAgICAgICAgICAgY29uc3QgaWdub3JlVW5pdCA9ICEoT2JqZWN0LmtleXModGhpcy5wb3NzaWJsZVVuaXRzKS5sZW5ndGggPiAxICYmIHRoaXMuaXNDb250ZW50VmlzaWJsZSk7XG4gICAgICAgICAgICBsZXQgdmFyaWF0aW9ucyA9IHRoaXMuZmlsdGVyVmFyaWF0aW9ucyhzZWxlY3RlZEF0dHJpYnV0ZXMsIG51bGwsIG51bGwsIGlnbm9yZVVuaXQpO1xuXG4gICAgICAgICAgICBpZiAoZmlsdGVyU2FsYWJsZVZhcmlhdGlvbnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyaWF0aW9ucyA9IHZhcmlhdGlvbnMuZmlsdGVyKHZhcmlhdGlvbiA9PiB2YXJpYXRpb24uaXNTYWxhYmxlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFyaWF0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIHRydWUsIGlmIHRoZSBzZWxlY3Rpb24gd2l0aCBhIG5ldyB1bml0SWQgd291bGQgYmUgdmFsaWRcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBzdHJpbmddfSB1bml0SWRcbiAgICAgICAgICovXG4gICAgICAgIGlzVW5pdFNlbGVjdGlvblZhbGlkKHVuaXRJZClcbiAgICAgICAge1xuICAgICAgICAgICAgdW5pdElkID0gcGFyc2VJbnQodW5pdElkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdCA9PT0gdW5pdElkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgIC5maWx0ZXJWYXJpYXRpb25zKG51bGwsIHVuaXRJZClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHZhcmlhdGlvbiA9PiB2YXJpYXRpb24uaXNTYWxhYmxlKVxuICAgICAgICAgICAgICAgIC5sZW5ndGggPiAwXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRpc3BhdGNoIHZ1ZXggYWN0aW9uICdsb2FkVmFyaWF0aW9uJyB0byBhcmNoaXZlIGEgdmFyaWF0aW9uXG4gICAgICAgICAqIGRpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgbmFtZWQgJ29uVmFyaWF0aW9uQ2hhbmdlZCdcbiAgICAgICAgICogQHBhcmFtIHtbc3RyaW5nLCBudW1iZXIsIG51bGxdfSB2YXJpYXRpb25JZFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0VmFyaWF0aW9uKHZhcmlhdGlvbklkKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWlzRGVmaW5lZCh2YXJpYXRpb25JZCkgJiYgdGhpcy5jdXJyZW50U2VsZWN0aW9uKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhcmlhdGlvbklkID0gdGhpcy5jdXJyZW50U2VsZWN0aW9uLnZhcmlhdGlvbklkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhcmlhdGlvbklkKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHt0aGlzLml0ZW1JZH0vbG9hZFZhcmlhdGlvbmAsIHZhcmlhdGlvbklkKS50aGVuKHZhcmlhdGlvbiA9PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJvblZhcmlhdGlvbkNoYW5nZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHZhcmlhdGlvbi5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB2YXJpYXRpb24uZG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB0aGlzLml0ZW1JZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNUZXh0Q3V0KGNvbnRlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmF0dHJpYnV0ZXNDb250YW5lcilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFdpZHRoKGNvbnRlbnQsIFwiQ3VzdG9tLUZvbnQsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZcIikgPiB0aGlzLiRyZWZzLmF0dHJpYnV0ZXNDb250YW5lclswXS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNlbGVjdGVkQXR0cmlidXRlVmFsdWVOYW1lKGF0dHJpYnV0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZUlkID0gIHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF07XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEF0dHJpYnV0ZVZhbHVlID0gYXR0cmlidXRlLnZhbHVlcy5maW5kKGF0dHJWYWx1ZSA9PiBhdHRyVmFsdWUuYXR0cmlidXRlVmFsdWVJZCA9PT0gc2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZUlkKTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkQXR0cmlidXRlVmFsdWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkQXR0cmlidXRlVmFsdWUubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFwcC5jb25maWcuaXRlbS5zaG93UGxlYXNlU2VsZWN0ICYmIHNlbGVjdGVkQXR0cmlidXRlVmFsdWVJZCA9PT0gLTEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtUGxlYXNlU2VsZWN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm9TZWxlY3Rpb25cIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdHJhbnNmb3JtUG9zc2libGVVbml0cyhwb3NzaWJsZVVuaXRzKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocG9zc2libGVVbml0cykuc29ydCgodW5pdEEsIHVuaXRCKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5pdEEgPSB0aGlzLnNwbGl0VW5pdE5hbWUodW5pdEFbMV0pO1xuICAgICAgICAgICAgICAgIHVuaXRCID0gdGhpcy5zcGxpdFVuaXROYW1lKHVuaXRCWzFdKTtcbiAgICAgICAgICAgICAgICAvLyBvcmRlciBieSB1bml0XG4gICAgICAgICAgICAgICAgaWYgKHVuaXRBWzFdIDwgdW5pdEJbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodW5pdEFbMV0gPiB1bml0QlsxXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgYnkgY29udGVudCAoY291bnQpXG4gICAgICAgICAgICAgICAgaWYgKHVuaXRBWzBdIDwgdW5pdEJbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodW5pdEFbMF0gPiB1bml0QlswXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRVbml0TmFtZSh1bml0TmFtZSkge1xuICAgICAgICAgICAgY29uc3QgdW5pdE5hbWVTcGxpdCA9IHVuaXROYW1lLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICAgICAgaWYgKCFpc05hTih1bml0TmFtZVNwbGl0WzBdKSkge1xuICAgICAgICAgICAgICAgIHVuaXROYW1lU3BsaXRbMF0gPSB1bml0TmFtZVNwbGl0WzBdLnJlcGxhY2UoQXBwLmN1cnJlbmN5UGF0dGVybi5zZXBhcmF0b3JfdGhvdXNhbmRzLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB1bml0TmFtZVNwbGl0WzBdID0gcGFyc2VJbnQodW5pdE5hbWVTcGxpdFswXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1bml0TmFtZVNwbGl0O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdhdGNoOlxuICAgIHtcbiAgICAgICAgY3VycmVudFNlbGVjdGlvbih2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGAke3RoaXMuaXRlbUlkfS92YXJpYXRpb25TZWxlY3Qvc2V0SXNWYXJpYXRpb25TZWxlY3RlZGAsICEhdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICB2YXJpYXRpb25zKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gRklYIHVuc2V0IHZhcmlhdGlvbiBjYWNoZSBhZnRlciBzdWJzZXF1ZW50IHZhcmlhdGlvbnMgYXJlIGxvYWRlZFxuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZFZhcmlhdGlvbnNDYWNoZSA9IHt9O1xuICAgICAgICB9XG4gICAgfVxufVxuPC9zY3JpcHQ+XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&":
/*!*******************************************************************************************!*\
  !*** ./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_vue_loader_lib_index_js_vue_loader_options_VariationSelect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VariationSelect.vue?vue&type=script&lang=js& */ \"./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\");\n /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_vue_loader_lib_index_js_vue_loader_options_VariationSelect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyYuanMiLCJtYXBwaW5ncyI6Ijs7QUFBOEksQ0FBQywrREFBZSw2SUFBRyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ2VyZXMvLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT8zMGVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05&":
/*!*************************************************************************************************!*\
  !*** ./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05& ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": function() { return /* reexport safe */ _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__.render; },
/* harmony export */   "staticRenderFns": function() { return /* reexport safe */ _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns; }
/* harmony export */ });
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_VariationSelect_vue_vue_type_template_id_4a939d05___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VariationSelect.vue?vue&type=template&id=4a939d05& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05&");


/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05&":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05& ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* binding */ render; },\n/* harmony export */   \"staticRenderFns\": function() { return /* binding */ staticRenderFns; }\n/* harmony export */ });\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"row\" },\n    [\n      _vm.attributes.length ||\n      (_vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible)\n        ? [\n            _vm._l(_vm.attributes, function (attribute, index) {\n              return _c(\n                \"div\",\n                { key: index, staticClass: \"col-12 variation-select\" },\n                [\n                  attribute.type === \"dropdown\"\n                    ? _c(\n                        \"div\",\n                        {\n                          ref: \"attributesContaner\",\n                          refInFor: true,\n                          staticClass: \"input-unit\",\n                        },\n                        [\n                          _c(\n                            \"select\",\n                            {\n                              staticClass: \"custom-select\",\n                              attrs: {\n                                id: \"custom-select_\" + attribute.name,\n                                \"data-testing\": \"variation-select-dropdown\",\n                              },\n                              on: {\n                                change: function ($event) {\n                                  return _vm.selectAttribute(\n                                    attribute.attributeId,\n                                    $event.target.value\n                                  )\n                                },\n                              },\n                            },\n                            [\n                              _vm.addPleaseSelectOption || !_vm.hasSelection\n                                ? _c(\"option\", { domProps: { value: -1 } }, [\n                                    _vm._v(\n                                      _vm._s(\n                                        _vm.$translate(\n                                          \"Ceres::Template.singleItemPleaseSelect\"\n                                        )\n                                      )\n                                    ),\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              _vm.hasEmptyOption ||\n                              _vm.selectedAttributes[attribute.attributeId] ===\n                                null\n                                ? _c(\n                                    \"option\",\n                                    {\n                                      domProps: {\n                                        value: null,\n                                        selected:\n                                          _vm.selectedAttributes[\n                                            attribute.attributeId\n                                          ] === null,\n                                      },\n                                    },\n                                    [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemNoSelection\"\n                                          )\n                                        )\n                                      ),\n                                    ]\n                                  )\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              _vm._l(attribute.values, function (value) {\n                                return _c(\n                                  \"option\",\n                                  {\n                                    key: value.attributeValueId,\n                                    domProps: {\n                                      value: value.attributeValueId,\n                                      selected:\n                                        value.attributeValueId ===\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ],\n                                    },\n                                  },\n                                  [\n                                    _vm.isAttributeSelectionValid(\n                                      attribute.attributeId,\n                                      value.attributeValueId,\n                                      true\n                                    )\n                                      ? [\n                                          _vm._v(\n                                            \"\\n                            \" +\n                                              _vm._s(value.name) +\n                                              \"\\n                        \"\n                                          ),\n                                        ]\n                                      : _vm.isAttributeSelectionValid(\n                                          attribute.attributeId,\n                                          value.attributeValueId,\n                                          false\n                                        )\n                                      ? [\n                                          _vm._v(\n                                            \"\\n                            \" +\n                                              _vm._s(\n                                                _vm.$translate(\n                                                  \"Ceres::Template.singleItemNotSalableAttribute\",\n                                                  { name: value.name }\n                                                )\n                                              ) +\n                                              \"\\n                        \"\n                                          ),\n                                        ]\n                                      : [\n                                          _vm._v(\n                                            \"\\n                            \" +\n                                              _vm._s(\n                                                _vm.$translate(\n                                                  \"Ceres::Template.singleItemInvalidAttribute\",\n                                                  { name: value.name }\n                                                )\n                                              ) +\n                                              \"\\n                        \"\n                                          ),\n                                        ],\n                                  ],\n                                  2\n                                )\n                              }),\n                            ],\n                            2\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"label\",\n                            {\n                              directives: [\n                                {\n                                  name: \"tooltip\",\n                                  rawName: \"v-tooltip\",\n                                  value: _vm.isTextCut(attribute.name),\n                                  expression: \"isTextCut(attribute.name)\",\n                                },\n                              ],\n                              attrs: {\n                                for: \"custom-select_\" + attribute.name,\n                                \"data-toggle\": \"tooltip\",\n                                \"data-placement\": \"top\",\n                                title: attribute.name,\n                                \"data-testing\":\n                                  \"variation-select-dropdown-label\",\n                              },\n                            },\n                            [_vm._v(_vm._s(attribute.name))]\n                          ),\n                        ]\n                      )\n                    : attribute.type === \"box\" || attribute.type === \"image\"\n                    ? _c(\"div\", [\n                        _c(\n                          \"span\",\n                          {\n                            staticClass: \"text-muted\",\n                            attrs: { \"data-testing\": \"attribute-name\" },\n                          },\n                          [_vm._v(_vm._s(attribute.name) + \":\")]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"b\",\n                          { attrs: { \"data-testing\": \"attribute-value\" } },\n                          [\n                            _vm._v(\n                              _vm._s(\n                                _vm.getSelectedAttributeValueName(attribute)\n                              )\n                            ),\n                          ]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          {\n                            staticClass: \"v-s-boxes py-3\",\n                            class: { images: attribute.type === \"image\" },\n                          },\n                          [\n                            _vm.addPleaseSelectOption\n                              ? _c(\n                                  \"div\",\n                                  {\n                                    staticClass:\n                                      \"v-s-box bg-white empty-option\",\n                                    class: {\n                                      active:\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ] === -1,\n                                      invalid: !_vm.isAttributeSelectionValid(\n                                        attribute.attributeId,\n                                        -1\n                                      ),\n                                    },\n                                    attrs: {\n                                      \"data-testing\": \"variation-select-box\",\n                                    },\n                                    on: {\n                                      click: function ($event) {\n                                        return _vm.selectAttribute(\n                                          attribute.attributeId,\n                                          -1\n                                        )\n                                      },\n                                    },\n                                  },\n                                  [\n                                    _c(\"span\", { staticClass: \"mx-3\" }, [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemPleaseSelect\"\n                                          )\n                                        )\n                                      ),\n                                    ]),\n                                  ]\n                                )\n                              : _vm._e(),\n                            _vm._v(\" \"),\n                            _vm.hasEmptyOption\n                              ? _c(\n                                  \"div\",\n                                  {\n                                    staticClass:\n                                      \"v-s-box bg-white empty-option\",\n                                    class: {\n                                      active:\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ] === null,\n                                      invalid: !_vm.isAttributeSelectionValid(\n                                        attribute.attributeId,\n                                        null,\n                                        true\n                                      ),\n                                    },\n                                    attrs: {\n                                      \"data-testing\": \"variation-select-box\",\n                                    },\n                                    on: {\n                                      click: function ($event) {\n                                        return _vm.selectAttribute(\n                                          attribute.attributeId,\n                                          null\n                                        )\n                                      },\n                                    },\n                                  },\n                                  [\n                                    _c(\"span\", { staticClass: \"mx-3\" }, [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemNoSelection\"\n                                          )\n                                        )\n                                      ),\n                                    ]),\n                                  ]\n                                )\n                              : _vm._e(),\n                            _vm._v(\" \"),\n                            _vm._l(attribute.values, function (value) {\n                              return _c(\n                                \"div\",\n                                {\n                                  directives: [\n                                    {\n                                      name: \"tooltip\",\n                                      rawName: \"v-tooltip\",\n                                      value: true,\n                                      expression: \"true\",\n                                    },\n                                  ],\n                                  key: value.attributeValueId,\n                                  staticClass: \"v-s-box bg-white\",\n                                  class: {\n                                    active:\n                                      value.attributeValueId ===\n                                      _vm.selectedAttributes[\n                                        attribute.attributeId\n                                      ],\n                                    invalid: !_vm.isAttributeSelectionValid(\n                                      attribute.attributeId,\n                                      value.attributeValueId,\n                                      true\n                                    ),\n                                  },\n                                  attrs: {\n                                    \"data-testing\": \"variation-select-box\",\n                                    \"data-html\": \"true\",\n                                    \"data-toggle\": \"tooltip\",\n                                    \"data-placement\": \"top\",\n                                    \"data-original-title\": _vm.getTooltip(\n                                      attribute,\n                                      value\n                                    ),\n                                  },\n                                  on: {\n                                    click: function ($event) {\n                                      return _vm.selectAttribute(\n                                        attribute.attributeId,\n                                        value.attributeValueId\n                                      )\n                                    },\n                                  },\n                                },\n                                [\n                                  attribute.type === \"box\"\n                                    ? _c(\"span\", { staticClass: \"mx-3\" }, [\n                                        _vm._v(_vm._s(value.name)),\n                                      ])\n                                    : _c(\"img\", {\n                                        staticClass: \"p-1\",\n                                        attrs: {\n                                          src: value.imageUrl,\n                                          alt: value.name,\n                                        },\n                                      }),\n                                ]\n                              )\n                            }),\n                          ],\n                          2\n                        ),\n                      ])\n                    : _vm._e(),\n                ]\n              )\n            }),\n            _vm._v(\" \"),\n            _vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible\n              ? _c(\"div\", { staticClass: \"col-12 variation-select\" }, [\n                  _c(\"div\", { staticClass: \"input-unit\" }, [\n                    _c(\n                      \"select\",\n                      {\n                        staticClass: \"custom-select\",\n                        attrs: {\n                          id: \"unit-combination-ids-select\",\n                          \"data-testing\": \"variation-select-unit\",\n                        },\n                        on: {\n                          change: function ($event) {\n                            return _vm.selectUnit($event.target.value)\n                          },\n                        },\n                      },\n                      _vm._l(\n                        _vm.possibleUnitCombinationIds,\n                        function (unitCombinationId) {\n                          return _c(\n                            \"option\",\n                            {\n                              key: unitCombinationId,\n                              domProps: {\n                                value: unitCombinationId,\n                                selected:\n                                  parseInt(unitCombinationId) ===\n                                  _vm.selectedUnit,\n                              },\n                            },\n                            [\n                              _vm.isUnitSelectionValid(unitCombinationId)\n                                ? [\n                                    _vm._v(\n                                      \"\\n                            \" +\n                                        _vm._s(\n                                          _vm.possibleUnits[unitCombinationId]\n                                        ) +\n                                        \"\\n                        \"\n                                    ),\n                                  ]\n                                : [\n                                    _vm._v(\n                                      \"\\n                            \" +\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemInvalidAttribute\",\n                                            {\n                                              name: _vm.possibleUnits[\n                                                unitCombinationId\n                                              ],\n                                            }\n                                          )\n                                        ) +\n                                        \"\\n                        \"\n                                    ),\n                                  ],\n                            ],\n                            2\n                          )\n                        }\n                      ),\n                      0\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"label\",\n                      {\n                        attrs: {\n                          for: \"unit-combination-ids-select\",\n                          \"data-testing\": \"variation-select-unit-label\",\n                        },\n                      },\n                      [\n                        _vm._v(\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.singleItemContent\")\n                          )\n                        ),\n                      ]\n                    ),\n                  ]),\n                ])\n              : _vm._e(),\n          ]\n        : [_vm._t(\"default\")],\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy90ZW1wbGF0ZUxvYWRlci5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD00YTkzOWQwNSYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9CQUFvQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBb0Q7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQywrQkFBK0I7QUFDL0IsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxpREFBaUQsWUFBWSxhQUFhO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsa0NBQWtDO0FBQ3ZFLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFNBQVMscUNBQXFDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG9DQUFvQztBQUN6RSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDLG1DQUFtQztBQUNuQztBQUNBLGlEQUFpRCxxQkFBcUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDLG1DQUFtQztBQUNuQztBQUNBLGlEQUFpRCxxQkFBcUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG1DQUFtQztBQUNuQyxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLG1EQUFtRCxxQkFBcUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDRCQUE0Qix3Q0FBd0M7QUFDcEUsOEJBQThCLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IseUJBQXlCO0FBQ3pCLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ2VyZXMvLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT9kZjlmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdm0gPSB0aGlzXG4gIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudFxuICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2hcbiAgcmV0dXJuIF9jKFxuICAgIFwiZGl2XCIsXG4gICAgeyBzdGF0aWNDbGFzczogXCJyb3dcIiB9LFxuICAgIFtcbiAgICAgIF92bS5hdHRyaWJ1dGVzLmxlbmd0aCB8fFxuICAgICAgKF92bS5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGggPiAxICYmIF92bS5pc0NvbnRlbnRWaXNpYmxlKVxuICAgICAgICA/IFtcbiAgICAgICAgICAgIF92bS5fbChfdm0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHJpYnV0ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9jKFxuICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4LCBzdGF0aWNDbGFzczogXCJjb2wtMTIgdmFyaWF0aW9uLXNlbGVjdFwiIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLnR5cGUgPT09IFwiZHJvcGRvd25cIlxuICAgICAgICAgICAgICAgICAgICA/IF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBcImF0dHJpYnV0ZXNDb250YW5lclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJbkZvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiaW5wdXQtdW5pdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJjdXN0b20tc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJjdXN0b20tc2VsZWN0X1wiICsgYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aW5nXCI6IFwidmFyaWF0aW9uLXNlbGVjdC1kcm9wZG93blwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWN0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uYWRkUGxlYXNlU2VsZWN0T3B0aW9uIHx8ICFfdm0uaGFzU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXCJvcHRpb25cIiwgeyBkb21Qcm9wczogeyB2YWx1ZTogLTEgfSB9LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1QbGVhc2VTZWxlY3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5oYXNFbXB0eU9wdGlvbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLnNlbGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGUuYXR0cmlidXRlSWRdID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLnNlbGVjdGVkQXR0cmlidXRlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID09PSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm9TZWxlY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKGF0dHJpYnV0ZS52YWx1ZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUuYXR0cmlidXRlVmFsdWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uc2VsZWN0ZWRBdHRyaWJ1dGVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKHZhbHVlLm5hbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vdFNhbGFibGVBdHRyaWJ1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiB2YWx1ZS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbUludmFsaWRBdHRyaWJ1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiB2YWx1ZS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmlzVGV4dEN1dChhdHRyaWJ1dGUubmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJpc1RleHRDdXQoYXR0cmlidXRlLm5hbWUpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yOiBcImN1c3RvbS1zZWxlY3RfXCIgKyBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRvZ2dsZVwiOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXBsYWNlbWVudFwiOiBcInRvcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aW5nXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YXJpYXRpb24tc2VsZWN0LWRyb3Bkb3duLWxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihfdm0uX3MoYXR0cmlidXRlLm5hbWUpKV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIDogYXR0cmlidXRlLnR5cGUgPT09IFwiYm94XCIgfHwgYXR0cmlidXRlLnR5cGUgPT09IFwiaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgICA/IF9jKFwiZGl2XCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcInRleHQtbXV0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImRhdGEtdGVzdGluZ1wiOiBcImF0dHJpYnV0ZS1uYW1lXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihfdm0uX3MoYXR0cmlidXRlLm5hbWUpICsgXCI6XCIpXVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsgYXR0cnM6IHsgXCJkYXRhLXRlc3RpbmdcIjogXCJhdHRyaWJ1dGUtdmFsdWVcIiB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5nZXRTZWxlY3RlZEF0dHJpYnV0ZVZhbHVlTmFtZShhdHRyaWJ1dGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcInYtcy1ib3hlcyBweS0zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHsgaW1hZ2VzOiBhdHRyaWJ1dGUudHlwZSA9PT0gXCJpbWFnZVwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uYWRkUGxlYXNlU2VsZWN0T3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidi1zLWJveCBiZy13aGl0ZSBlbXB0eS1vcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uc2VsZWN0ZWRBdHRyaWJ1dGVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA9PT0gLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQ6ICFfdm0uaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdGluZ1wiOiBcInZhcmlhdGlvbi1zZWxlY3QtYm94XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjdEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFwic3BhblwiLCB7IHN0YXRpY0NsYXNzOiBcIm14LTNcIiB9LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbVBsZWFzZVNlbGVjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLmhhc0VtcHR5T3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidi1zLWJveCBiZy13aGl0ZSBlbXB0eS1vcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uc2VsZWN0ZWRBdHRyaWJ1dGVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA9PT0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZDogIV92bS5pc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdGluZ1wiOiBcInZhcmlhdGlvbi1zZWxlY3QtYm94XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjdEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXCJzcGFuXCIsIHsgc3RhdGljQ2xhc3M6IFwibXgtM1wiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm9TZWxlY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fbChhdHRyaWJ1dGUudmFsdWVzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd05hbWU6IFwidi10b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcInRydWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwidi1zLWJveCBiZy13aGl0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RlZEF0dHJpYnV0ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkOiAhX3ZtLmlzQXR0cmlidXRlU2VsZWN0aW9uVmFsaWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdGluZ1wiOiBcInZhcmlhdGlvbi1zZWxlY3QtYm94XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtaHRtbFwiOiBcInRydWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10b2dnbGVcIjogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtcGxhY2VtZW50XCI6IFwidG9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtb3JpZ2luYWwtdGl0bGVcIjogX3ZtLmdldFRvb2x0aXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY3RBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLnR5cGUgPT09IFwiYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXCJzcGFuXCIsIHsgc3RhdGljQ2xhc3M6IFwibXgtM1wiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoX3ZtLl9zKHZhbHVlLm5hbWUpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX2MoXCJpbWdcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcInAtMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IHZhbHVlLmltYWdlVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0OiB2YWx1ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgIF92bS5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGggPiAxICYmIF92bS5pc0NvbnRlbnRWaXNpYmxlXG4gICAgICAgICAgICAgID8gX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJjb2wtMTIgdmFyaWF0aW9uLXNlbGVjdFwiIH0sIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwiaW5wdXQtdW5pdFwiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJjdXN0b20tc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJ1bml0LWNvbWJpbmF0aW9uLWlkcy1zZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRlc3RpbmdcIjogXCJ2YXJpYXRpb24tc2VsZWN0LXVuaXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjdFVuaXQoJGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uX2woXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0ucG9zc2libGVVbml0Q29tYmluYXRpb25JZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodW5pdENvbWJpbmF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB1bml0Q29tYmluYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bml0Q29tYmluYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodW5pdENvbWJpbmF0aW9uSWQpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RlZFVuaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLmlzVW5pdFNlbGVjdGlvblZhbGlkKHVuaXRDb21iaW5hdGlvbklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5wb3NzaWJsZVVuaXRzW3VuaXRDb21iaW5hdGlvbklkXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtSW52YWxpZEF0dHJpYnV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogX3ZtLnBvc3NpYmxlVW5pdHNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0Q29tYmluYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcjogXCJ1bml0LWNvbWJpbmF0aW9uLWlkcy1zZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRlc3RpbmdcIjogXCJ2YXJpYXRpb24tc2VsZWN0LXVuaXQtbGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtQ29udGVudFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIDogX3ZtLl9lKCksXG4gICAgICAgICAgXVxuICAgICAgICA6IFtfdm0uX3QoXCJkZWZhdWx0XCIpXSxcbiAgICBdLFxuICAgIDJcbiAgKVxufVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5yZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWVcblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=4a939d05&\n");

/***/ })

}]);