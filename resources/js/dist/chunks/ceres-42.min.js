"use strict";(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[42],{7401:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("form",{ref:"form",staticClass:"mb-3 login-pwd-reset",attrs:{method:"post"}},[i("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",autocomplete:"email","data-testing":"guest-login-input",id:t._uid,"data-autofocus":""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("label",{attrs:{for:t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")])]),t._v(" "),i("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))]),t._v(" "),i("div",{staticClass:"text-right"},[i("button",{staticClass:"btn btn-primary btn-medium btn-appearance",class:t.buttonSizeClass,attrs:{disabled:t.isDisabled,"data-testing":"guest-login-button"},on:{click:function(e){return e.preventDefault(),t.validate(e)}}},[t._v("\n                "+t._s(t.$translate("Ceres::Template.loginNext"))+"\n                "),i("icon",{attrs:{icon:"arrow-right",loading:t.isDisabled}})],1)])])])};a._withStripped=!0;var s=i(9430),n=i(3085),l=i(2201),o=i(7412),r=i(3279),u=i(1023),d=i(7832),m={mixins:[s.Z],props:{backlink:{type:String},initialEmail:{type:String,default:""}},data:()=>({email:"",isDisabled:!1}),created(){!(0,u.le)(this.initialEmail)&&this.initialEmail.length>0&&(this.email=this.initialEmail)},mounted(){this.$nextTick((()=>{const t=d.default.findModal(this.$parent.$refs.guestModal);(0,u.le)(t)||t.on("hidden.bs.modal",(()=>{this.email="",o.default.unmarkAllFields(this.$refs.form)})),(0,u.$K)(t)&&t.on("shown.bs.modal",(()=>{l.default.triggerAutoFocus(t)}))}))},methods:{validate(){o.default.validate(this.$refs.form).done((()=>{this.authGuest()})).fail((t=>{o.default.markInvalidFields(t,"error")}))},authGuest(){this.isDisabled=!0,n.default.post("/rest/io/guest",{email:this.email}).done((()=>{(0,r.T8)((0,u.$K)(this.backlink)&&this.backlink.length?decodeURIComponent(this.backlink):window.location.origin+(App.urls.includeLanguage?"/"+App.language:""))})).fail((()=>{this.isDisabled=!1}))}}},c=(0,i(1900).Z)(m,a,[],!1,null,null,null);c.options.__file="resources/js/src/app/components/customer/login/GuestLogin.vue";var p=c.exports},9430:function(t,e,i){i.d(e,{Z:function(){return n}});const a=["btn-sm","btn-lg"],s={sm:"btn-sm",md:"",lg:"btn-lg"},n={props:{buttonSize:{type:[String,null],default:null,validator:t=>-1!==["",...a,...Object.keys(s)].indexOf(t)}},computed:{buttonSizeClass(){return s.hasOwnProperty(this.buttonSize)?s[this.buttonSize]:this.buttonSize}}}}}]);
//# sourceMappingURL=ceres-42.min.js.map