"use strict";(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[22],{2251:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": function() { return /* binding */ ItemImageCarousel; }\n});\n\n;// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/ItemImageCarousel.vue?vue&type=template&id=d4884ff0&\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    "div",\n    { attrs: { itemscope: "", itemtype: "http://schema.org/Thing" } },\n    [\n      [\n        _c(\n          "div",\n          {\n            ref: "single",\n            staticClass:\n              "single-carousel owl-carousel owl-theme owl-single-item mt-0",\n          },\n          _vm._l(_vm.singleImages, function (image) {\n            return _c("div", { staticClass: "prop-1-1" }, [\n              _c(\n                "a",\n                {\n                  attrs: {\n                    href: image.url,\n                    "data-lightbox": "single-item-image" + _vm._uid,\n                  },\n                },\n                [\n                  _c("img", {\n                    staticClass: "owl-lazy",\n                    attrs: {\n                      "data-src": image.url,\n                      alt: _vm.getAltText(image),\n                      title: _vm.getImageName(image),\n                    },\n                  }),\n                ]\n              ),\n            ])\n          }),\n          0\n        ),\n        _vm._v(" "),\n        _vm.showThumbs\n          ? _c(\n              "div",\n              {\n                ref: "thumbs",\n                staticClass:\n                  "owl-thumbs owl-carousel owl-theme owl-single-item",\n                attrs: { id: "thumb-carousel" },\n              },\n              _vm._l(_vm.carouselImages, function (imagePreview, index) {\n                return _c("div", { staticClass: "prop-1-1" }, [\n                  _c(\n                    "div",\n                    {\n                      staticClass: "image-container",\n                      on: {\n                        click: function ($event) {\n                          return _vm.goTo(index)\n                        },\n                      },\n                    },\n                    [\n                      _c("lazy-img", {\n                        class: { active: _vm.currentItem === index },\n                        attrs: {\n                          "picture-class": "owl-thumb border-appearance",\n                          "image-url": imagePreview.url,\n                          alt: _vm.getAltText(imagePreview),\n                          title: _vm.getImageName(imagePreview),\n                        },\n                      }),\n                    ],\n                    1\n                  ),\n                ])\n              }),\n              0\n            )\n          : _vm._e(),\n      ],\n      _vm._v(" "),\n      !_vm.initialized\n        ? _c(\n            "div",\n            {\n              staticClass:\n                "single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0",\n            },\n            [\n              _c("div", { staticClass: "prop-1-1" }, [\n                _c("img", {\n                  staticClass: "owl-placeholder",\n                  attrs: {\n                    src: _vm.singleImages[0].url,\n                    alt: _vm.getAltText(_vm.singleImages[0].url),\n                    title: _vm.getImageName(_vm.singleImages[0].url),\n                  },\n                }),\n              ]),\n            ]\n          )\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/ItemImageCarousel.vue?vue&type=template&id=d4884ff0&\n\n// EXTERNAL MODULE: ./resources/js/src/app/helper/utils.js\nvar utils = __webpack_require__(1023);\n;// CONCATENATED MODULE: ./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/ItemImageCarousel.vue?vue&type=script&lang=js&\n\n\n\n/* harmony default export */ var ItemImageCarouselvue_type_script_lang_js_ = ({\n    name: "item-image-carousel",\n\n    props: {\n        maxQuantity:\n        {\n            type: Number,\n            default: 10\n        },\n        imageUrlAccessor:\n        {\n            type: String,\n            default: "url"\n        },\n        showThumbs:\n        {\n            type: Boolean,\n            default: true\n        },\n        showDots:\n        {\n            type: Boolean,\n            default: true\n        },\n        animationStyle:\n        {\n            type: String,\n            default: "standard"\n        },\n        pluginPath:\n        {\n            type: String,\n            default: ""\n        }\n    },\n\n    inject: {\n        itemId: {\n            default: null\n        }\n    },\n\n    data()\n    {\n        return {\n            currentItem: 0,\n            initialized: false\n        };\n    },\n\n    computed:\n    {\n        currentVariation()\n        {\n            return this.$store.getters[`${this.itemId}/currentItemVariation`]\n        },\n\n        carouselImages()\n        {\n            return this.$options.filters.itemImages(\n                    this.currentVariation.images,\n                    "urlPreview"\n                ).slice(0, this.maxQuantity);\n        },\n\n        singleImages()\n        {\n            return this.$options.filters.itemImages(\n                    this.currentVariation.images,\n                    this.imageUrlAccessor\n            ).slice(0, this.maxQuantity);\n        }\n    },\n\n    watch: {\n        currentVariation:\n        {\n            handler(val, oldVal)\n            {\n                if (val !== oldVal)\n                {\n                    setTimeout(() =>\n                    {\n                        this.reInitialize();\n                    }, 1);\n                }\n            },\n            deep: true\n        }\n    },\n\n    mounted()\n    {\n        this.$nextTick(() =>\n        {\n            this.loadLightbox().then(() =>\n                {\n                    this.initCarousel();\n                    this.initThumbCarousel();\n                })\n                .catch(event =>\n                {\n                    console.log("error while loading lightbox", event);\n                });\n        });\n    },\n\n    methods:\n    {\n        getImageCount()\n        {\n            return this.carouselImages.length > this.maxQuantity ? this.maxQuantity : this.carouselImages.length;\n        },\n\n        reInitialize()\n        {\n            const $owl = $(this.$refs.single);\n\n            $owl.trigger("destroy.owl.carousel");\n            $owl.html($owl.find(".owl-stage-outer").html()).removeClass("owl-loaded");\n            $owl.find(".owl-item").remove();\n\n            const $thumbs = $(this.$refs.thumbs);\n\n            $thumbs.trigger("destroy.owl.carousel");\n            $thumbs.html($thumbs.find(".owl-stage-outer").html()).removeClass("owl-loaded");\n            $thumbs.find(".owl-item").remove();\n\n            this.initCarousel();\n            this.initThumbCarousel();\n        },\n\n        initCarousel()\n        {\n            const imageCount = this.getImageCount();\n            const carouselSettings = {\n                autoHeight       : true,\n                dots             : this.showDots,\n                items            : 1,\n                lazyLoad         : true,\n                rewind           : true,\n                margin           : 10,\n                mouseDrag        : imageCount > 1,\n                nav              : imageCount > 1,\n                navClass         : [\n                    "owl-single-item-nav left carousel-control",\n                    "owl-single-item-nav right carousel-control"\n                ],\n                navContainerClass: "",\n                navText          : [\n                    "<i class=\\"owl-single-item-control fa fa-chevron-left\\" aria-hidden=\\"true\\"></i>",\n                    "<i class=\\"owl-single-item-control fa fa-chevron-right\\" aria-hidden=\\"true\\"></i>"\n                ],\n                smartSpeed       : 350,\n                onChanged: event =>\n                {\n                    const $thumb = $(this.$refs.thumbs);\n\n                    $thumb.trigger("to.owl.carousel", [\n                        event.page.index,\n                        350\n                    ]);\n                },\n                onInitialized: event =>\n                {\n                    this.initialized = true;\n                }\n            };\n\n            if (this.animationStyle !== "standard")\n            {\n                carouselSettings.animateOut = this.animationStyle;\n            }\n\n            $(this.$refs.single).owlCarousel(carouselSettings);\n\n            if (!(0,utils/* isNullOrUndefined */.le)(window.lightbox))\n            {\n                lightbox.option({\n                    wrapAround: true,\n                    albumLabel: this.$translate("Ceres::Template.singleItemLightboxImageShown")\n                });\n            }\n\n            $(this.$refs.single).on("changed.owl.carousel", event =>\n            {\n                this.currentItem = event.page.index;\n            });\n        },\n\n        initThumbCarousel()\n        {\n            $(this.$refs.thumbs).owlCarousel({\n                autoHeight       : true,\n                dots             : false,\n                items            : 5,\n                lazyLoad         : true,\n                loop             : false,\n                margin           : 10,\n                mouseDrag        : false,\n                center           : false,\n                nav              : true,\n                navClass         : [\n                    "owl-single-item-nav left carousel-control",\n                    "owl-single-item-nav right carousel-control"\n                ],\n                navContainerClass: "",\n                navText          : [\n                    "<i class=\\"owl-single-item-control fa fa-chevron-left\\" aria-hidden=\\"true\\"></i>",\n                    "<i class=\\"owl-single-item-control fa fa-chevron-right\\" aria-hidden=\\"true\\"></i>"\n                ],\n                smartSpeed       : 350\n            });\n        },\n\n        goTo(index)\n        {\n            const $owl = $(this.$refs.single);\n\n            $owl.trigger("to.owl.carousel", [\n                index,\n                350\n            ]);\n        },\n\n        getAltText(image)\n        {\n            return image && image.alternate ? image.alternate : this.$options.filters.itemName(this.currentVariation);\n        },\n\n        getImageName(image)\n        {\n            return image && image.name ? image.name : this.$options.filters.itemName(this.currentVariation);\n        },\n\n        loadLightbox()\n        {\n            return new Promise((resolve, reject) =>\n            {\n                const script = document.querySelector("script#lightboxscript");\n\n                if (!(0,utils/* isNullOrUndefined */.le)(script))\n                {\n                    resolve();\n                }\n                else\n                {\n                    const script = document.createElement("script");\n\n                    script.type = "text/javascript";\n                    script.id = "lightboxscript";\n                    script.src = `${ this.pluginPath }/js/dist/lightbox.min.js`;\n\n                    script.addEventListener("load", () => resolve(), false);\n                    script.addEventListener("error", event => reject(event), false);\n\n                    document.body.appendChild(script);\n                }\n            });\n        }\n    }\n});\n\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/ItemImageCarousel.vue?vue&type=script&lang=js&\n /* harmony default export */ var item_ItemImageCarouselvue_type_script_lang_js_ = (ItemImageCarouselvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(1900);\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/ItemImageCarousel.vue\n\n\n\n\n\n/* normalize component */\n;\nvar component = (0,componentNormalizer/* default */.Z)(\n  item_ItemImageCarouselvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ItemImageCarousel = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI1MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxTQUFTLHNEQUFzRDtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsK0JBQStCLHlCQUF5QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0JBQXNCO0FBQy9DLGVBQWU7QUFDZjtBQUNBLG1DQUFtQyx5QkFBeUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsdUJBQXVCO0FBQ3ZCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUNBQWlDLG1DQUFtQztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMEJBQTBCLHlCQUF5QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUV0RXVEOztBQUV2RCw4RUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpQkFBaUIsbUNBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixtQ0FBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUM3UytJLENBQUMsbUZBQWUseUNBQUcsRUFBQyxDOzs7O0FDQXBFO0FBQzNCO0FBQ0w7OztBQUdoRTtBQUNBLENBQXNHO0FBQ3RHLGdCQUFnQixzQ0FBVTtBQUMxQixFQUFFLDhDQUFNO0FBQ1IsRUFBRSxNQUFNO0FBQ1IsRUFBRSxlQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzREFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL0NlcmVzLy4vcmVzb3VyY2VzL2pzL3NyYy9hcHAvY29tcG9uZW50cy9pdGVtL0l0ZW1JbWFnZUNhcm91c2VsLnZ1ZT9mYzkzIiwid2VicGFjazovL0NlcmVzLy4vcmVzb3VyY2VzL2pzL3NyYy9hcHAvY29tcG9uZW50cy9pdGVtL0l0ZW1JbWFnZUNhcm91c2VsLnZ1ZT80ZDc5Iiwid2VicGFjazovL0NlcmVzL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9JdGVtSW1hZ2VDYXJvdXNlbC52dWU/OWY2NiIsIndlYnBhY2s6Ly9DZXJlcy8uL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9JdGVtSW1hZ2VDYXJvdXNlbC52dWU/YTc2OCIsIndlYnBhY2s6Ly9DZXJlcy8uL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9JdGVtSW1hZ2VDYXJvdXNlbC52dWU/NDU5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICB2YXIgX3ZtID0gdGhpcyxcbiAgICBfYyA9IF92bS5fc2VsZi5fY1xuICByZXR1cm4gX2MoXG4gICAgXCJkaXZcIixcbiAgICB7IGF0dHJzOiB7IGl0ZW1zY29wZTogXCJcIiwgaXRlbXR5cGU6IFwiaHR0cDovL3NjaGVtYS5vcmcvVGhpbmdcIiB9IH0sXG4gICAgW1xuICAgICAgW1xuICAgICAgICBfYyhcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlZjogXCJzaW5nbGVcIixcbiAgICAgICAgICAgIHN0YXRpY0NsYXNzOlxuICAgICAgICAgICAgICBcInNpbmdsZS1jYXJvdXNlbCBvd2wtY2Fyb3VzZWwgb3dsLXRoZW1lIG93bC1zaW5nbGUtaXRlbSBtdC0wXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfdm0uX2woX3ZtLnNpbmdsZUltYWdlcywgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJwcm9wLTEtMVwiIH0sIFtcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogaW1hZ2UudXJsLFxuICAgICAgICAgICAgICAgICAgICBcImRhdGEtbGlnaHRib3hcIjogXCJzaW5nbGUtaXRlbS1pbWFnZVwiICsgX3ZtLl91aWQsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXCJpbWdcIiwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJvd2wtbGF6eVwiLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1zcmNcIjogaW1hZ2UudXJsLFxuICAgICAgICAgICAgICAgICAgICAgIGFsdDogX3ZtLmdldEFsdFRleHQoaW1hZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdm0uZ2V0SW1hZ2VOYW1lKGltYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgMFxuICAgICAgICApLFxuICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICBfdm0uc2hvd1RodW1ic1xuICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZWY6IFwidGh1bWJzXCIsXG4gICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6XG4gICAgICAgICAgICAgICAgICBcIm93bC10aHVtYnMgb3dsLWNhcm91c2VsIG93bC10aGVtZSBvd2wtc2luZ2xlLWl0ZW1cIixcbiAgICAgICAgICAgICAgICBhdHRyczogeyBpZDogXCJ0aHVtYi1jYXJvdXNlbFwiIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF92bS5fbChfdm0uY2Fyb3VzZWxJbWFnZXMsIGZ1bmN0aW9uIChpbWFnZVByZXZpZXcsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwicHJvcC0xLTFcIiB9LCBbXG4gICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImltYWdlLWNvbnRhaW5lclwiLFxuICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmdvVG8oaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICBfYyhcImxhenktaW1nXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB7IGFjdGl2ZTogX3ZtLmN1cnJlbnRJdGVtID09PSBpbmRleCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwaWN0dXJlLWNsYXNzXCI6IFwib3dsLXRodW1iIGJvcmRlci1hcHBlYXJhbmNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW1hZ2UtdXJsXCI6IGltYWdlUHJldmlldy51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdDogX3ZtLmdldEFsdFRleHQoaW1hZ2VQcmV2aWV3KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF92bS5nZXRJbWFnZU5hbWUoaW1hZ2VQcmV2aWV3KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgXSxcbiAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAhX3ZtLmluaXRpYWxpemVkXG4gICAgICAgID8gX2MoXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzdGF0aWNDbGFzczpcbiAgICAgICAgICAgICAgICBcInNpbmdsZS1jYXJvdXNlbCBvd2wtY2Fyb3VzZWwgb3dsLWxvYWRlZCBvd2wtdGhlbWUgb3dsLXNpbmdsZS1pdGVtIG10LTBcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwicHJvcC0xLTFcIiB9LCBbXG4gICAgICAgICAgICAgICAgX2MoXCJpbWdcIiwge1xuICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwib3dsLXBsYWNlaG9sZGVyXCIsXG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBzcmM6IF92bS5zaW5nbGVJbWFnZXNbMF0udXJsLFxuICAgICAgICAgICAgICAgICAgICBhbHQ6IF92bS5nZXRBbHRUZXh0KF92bS5zaW5nbGVJbWFnZXNbMF0udXJsKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF92bS5nZXRJbWFnZU5hbWUoX3ZtLnNpbmdsZUltYWdlc1swXS51cmwpLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgKVxuICAgICAgICA6IF92bS5fZSgpLFxuICAgIF0sXG4gICAgMlxuICApXG59XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cbnJlbmRlci5fd2l0aFN0cmlwcGVkID0gdHJ1ZVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvdGVtcGxhdGVMb2FkZXIuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9JdGVtSW1hZ2VDYXJvdXNlbC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9ZDQ4ODRmZjAmXCIiLCI8dGVtcGxhdGU+XG4gICAgPGRpdiBpdGVtc2NvcGUgaXRlbXR5cGU9XCJodHRwOi8vc2NoZW1hLm9yZy9UaGluZ1wiPlxuICAgICAgICA8dGVtcGxhdGU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2luZ2xlLWNhcm91c2VsIG93bC1jYXJvdXNlbCBvd2wtdGhlbWUgb3dsLXNpbmdsZS1pdGVtIG10LTBcIiByZWY9XCJzaW5nbGVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHYtZm9yPVwiaW1hZ2UgaW4gc2luZ2xlSW1hZ2VzXCIgY2xhc3M9XCJwcm9wLTEtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSA6aHJlZj1cImltYWdlLnVybFwiIDpkYXRhLWxpZ2h0Ym94PVwiJ3NpbmdsZS1pdGVtLWltYWdlJyArIF91aWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJvd2wtbGF6eVwiIDpkYXRhLXNyYz1cImltYWdlLnVybFwiIDphbHQ9XCJnZXRBbHRUZXh0KGltYWdlKVwiIDp0aXRsZT1cImdldEltYWdlTmFtZShpbWFnZSlcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHYtaWY9XCJzaG93VGh1bWJzXCIgaWQ9XCJ0aHVtYi1jYXJvdXNlbFwiIGNsYXNzPVwib3dsLXRodW1icyBvd2wtY2Fyb3VzZWwgb3dsLXRoZW1lIG93bC1zaW5nbGUtaXRlbVwiIHJlZj1cInRodW1ic1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9wLTEtMVwiIHYtZm9yPVwiKGltYWdlUHJldmlldywgaW5kZXgpIGluIGNhcm91c2VsSW1hZ2VzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1jb250YWluZXJcIiBAY2xpY2s9XCJnb1RvKGluZGV4KVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhenktaW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZS1jbGFzcz1cIm93bC10aHVtYiBib3JkZXItYXBwZWFyYW5jZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1iaW5kOmNsYXNzPVwieyAnYWN0aXZlJzogY3VycmVudEl0ZW0gPT09IGluZGV4fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOmltYWdlLXVybD1cImltYWdlUHJldmlldy51cmxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDphbHQ9XCJnZXRBbHRUZXh0KGltYWdlUHJldmlldylcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp0aXRsZT1cImdldEltYWdlTmFtZShpbWFnZVByZXZpZXcpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhenktaW1nPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICA8ZGl2IHYtaWY9XCIhaW5pdGlhbGl6ZWRcIiBjbGFzcz1cInNpbmdsZS1jYXJvdXNlbCBvd2wtY2Fyb3VzZWwgb3dsLWxvYWRlZCBvd2wtdGhlbWUgb3dsLXNpbmdsZS1pdGVtIG10LTBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9wLTEtMVwiPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJvd2wtcGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICA6c3JjPVwic2luZ2xlSW1hZ2VzWzBdLnVybFwiXG4gICAgICAgICAgICAgICAgICAgIDphbHQ9XCJnZXRBbHRUZXh0KHNpbmdsZUltYWdlc1swXS51cmwpXCJcbiAgICAgICAgICAgICAgICAgICAgOnRpdGxlPVwiZ2V0SW1hZ2VOYW1lKHNpbmdsZUltYWdlc1swXS51cmwpXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHsgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tIFwiLi4vLi4vaGVscGVyL3V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiBcIml0ZW0taW1hZ2UtY2Fyb3VzZWxcIixcblxuICAgIHByb3BzOiB7XG4gICAgICAgIG1heFF1YW50aXR5OlxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICBpbWFnZVVybEFjY2Vzc29yOlxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiBcInVybFwiXG4gICAgICAgIH0sXG4gICAgICAgIHNob3dUaHVtYnM6XG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHNob3dEb3RzOlxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBhbmltYXRpb25TdHlsZTpcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZGVmYXVsdDogXCJzdGFuZGFyZFwiXG4gICAgICAgIH0sXG4gICAgICAgIHBsdWdpblBhdGg6XG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmplY3Q6IHtcbiAgICAgICAgaXRlbUlkOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGF0YSgpXG4gICAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3VycmVudEl0ZW06IDAsXG4gICAgICAgICAgICBpbml0aWFsaXplZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgY29tcHV0ZWQ6XG4gICAge1xuICAgICAgICBjdXJyZW50VmFyaWF0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7dGhpcy5pdGVtSWR9L2N1cnJlbnRJdGVtVmFyaWF0aW9uYF1cbiAgICAgICAgfSxcblxuICAgICAgICBjYXJvdXNlbEltYWdlcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRvcHRpb25zLmZpbHRlcnMuaXRlbUltYWdlcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFyaWF0aW9uLmltYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgXCJ1cmxQcmV2aWV3XCJcbiAgICAgICAgICAgICAgICApLnNsaWNlKDAsIHRoaXMubWF4UXVhbnRpdHkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNpbmdsZUltYWdlcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRvcHRpb25zLmZpbHRlcnMuaXRlbUltYWdlcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFyaWF0aW9uLmltYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVVybEFjY2Vzc29yXG4gICAgICAgICAgICApLnNsaWNlKDAsIHRoaXMubWF4UXVhbnRpdHkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdhdGNoOiB7XG4gICAgICAgIGN1cnJlbnRWYXJpYXRpb246XG4gICAgICAgIHtcbiAgICAgICAgICAgIGhhbmRsZXIodmFsLCBvbGRWYWwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gb2xkVmFsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlSW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVlcDogdHJ1ZVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1vdW50ZWQoKVxuICAgIHtcbiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sb2FkTGlnaHRib3goKS50aGVuKCgpID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRDYXJvdXNlbCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRUaHVtYkNhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXZlbnQgPT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3Igd2hpbGUgbG9hZGluZyBsaWdodGJveFwiLCBldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBtZXRob2RzOlxuICAgIHtcbiAgICAgICAgZ2V0SW1hZ2VDb3VudCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcm91c2VsSW1hZ2VzLmxlbmd0aCA+IHRoaXMubWF4UXVhbnRpdHkgPyB0aGlzLm1heFF1YW50aXR5IDogdGhpcy5jYXJvdXNlbEltYWdlcy5sZW5ndGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVJbml0aWFsaXplKClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgJG93bCA9ICQodGhpcy4kcmVmcy5zaW5nbGUpO1xuXG4gICAgICAgICAgICAkb3dsLnRyaWdnZXIoXCJkZXN0cm95Lm93bC5jYXJvdXNlbFwiKTtcbiAgICAgICAgICAgICRvd2wuaHRtbCgkb3dsLmZpbmQoXCIub3dsLXN0YWdlLW91dGVyXCIpLmh0bWwoKSkucmVtb3ZlQ2xhc3MoXCJvd2wtbG9hZGVkXCIpO1xuICAgICAgICAgICAgJG93bC5maW5kKFwiLm93bC1pdGVtXCIpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCAkdGh1bWJzID0gJCh0aGlzLiRyZWZzLnRodW1icyk7XG5cbiAgICAgICAgICAgICR0aHVtYnMudHJpZ2dlcihcImRlc3Ryb3kub3dsLmNhcm91c2VsXCIpO1xuICAgICAgICAgICAgJHRodW1icy5odG1sKCR0aHVtYnMuZmluZChcIi5vd2wtc3RhZ2Utb3V0ZXJcIikuaHRtbCgpKS5yZW1vdmVDbGFzcyhcIm93bC1sb2FkZWRcIik7XG4gICAgICAgICAgICAkdGh1bWJzLmZpbmQoXCIub3dsLWl0ZW1cIikucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdENhcm91c2VsKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRUaHVtYkNhcm91c2VsKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdENhcm91c2VsKClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VDb3VudCA9IHRoaXMuZ2V0SW1hZ2VDb3VudCgpO1xuICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0ICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkb3RzICAgICAgICAgICAgIDogdGhpcy5zaG93RG90cyxcbiAgICAgICAgICAgICAgICBpdGVtcyAgICAgICAgICAgIDogMSxcbiAgICAgICAgICAgICAgICBsYXp5TG9hZCAgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXdpbmQgICAgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXJnaW4gICAgICAgICAgIDogMTAsXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnICAgICAgICA6IGltYWdlQ291bnQgPiAxLFxuICAgICAgICAgICAgICAgIG5hdiAgICAgICAgICAgICAgOiBpbWFnZUNvdW50ID4gMSxcbiAgICAgICAgICAgICAgICBuYXZDbGFzcyAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgICBcIm93bC1zaW5nbGUtaXRlbS1uYXYgbGVmdCBjYXJvdXNlbC1jb250cm9sXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib3dsLXNpbmdsZS1pdGVtLW5hdiByaWdodCBjYXJvdXNlbC1jb250cm9sXCJcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG5hdkNvbnRhaW5lckNsYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgIG5hdlRleHQgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiPGkgY2xhc3M9XFxcIm93bC1zaW5nbGUtaXRlbS1jb250cm9sIGZhIGZhLWNoZXZyb24tbGVmdFxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvaT5cIixcbiAgICAgICAgICAgICAgICAgICAgXCI8aSBjbGFzcz1cXFwib3dsLXNpbmdsZS1pdGVtLWNvbnRyb2wgZmEgZmEtY2hldnJvbi1yaWdodFxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvaT5cIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc21hcnRTcGVlZCAgICAgICA6IDM1MCxcbiAgICAgICAgICAgICAgICBvbkNoYW5nZWQ6IGV2ZW50ID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCAkdGh1bWIgPSAkKHRoaXMuJHJlZnMudGh1bWJzKTtcblxuICAgICAgICAgICAgICAgICAgICAkdGh1bWIudHJpZ2dlcihcInRvLm93bC5jYXJvdXNlbFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wYWdlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgMzUwXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Jbml0aWFsaXplZDogZXZlbnQgPT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvblN0eWxlICE9PSBcInN0YW5kYXJkXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2Fyb3VzZWxTZXR0aW5ncy5hbmltYXRlT3V0ID0gdGhpcy5hbmltYXRpb25TdHlsZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh0aGlzLiRyZWZzLnNpbmdsZSkub3dsQ2Fyb3VzZWwoY2Fyb3VzZWxTZXR0aW5ncyk7XG5cbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQod2luZG93LmxpZ2h0Ym94KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsaWdodGJveC5vcHRpb24oe1xuICAgICAgICAgICAgICAgICAgICB3cmFwQXJvdW5kOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhbGJ1bUxhYmVsOiB0aGlzLiR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbUxpZ2h0Ym94SW1hZ2VTaG93blwiKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKHRoaXMuJHJlZnMuc2luZ2xlKS5vbihcImNoYW5nZWQub3dsLmNhcm91c2VsXCIsIGV2ZW50ID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IGV2ZW50LnBhZ2UuaW5kZXg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0VGh1bWJDYXJvdXNlbCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQodGhpcy4kcmVmcy50aHVtYnMpLm93bENhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0ICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkb3RzICAgICAgICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRlbXMgICAgICAgICAgICA6IDUsXG4gICAgICAgICAgICAgICAgbGF6eUxvYWQgICAgICAgICA6IHRydWUsXG4gICAgICAgICAgICAgICAgbG9vcCAgICAgICAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1hcmdpbiAgICAgICAgICAgOiAxMCxcbiAgICAgICAgICAgICAgICBtb3VzZURyYWcgICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2VudGVyICAgICAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hdiAgICAgICAgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hdkNsYXNzICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgIFwib3dsLXNpbmdsZS1pdGVtLW5hdiBsZWZ0IGNhcm91c2VsLWNvbnRyb2xcIixcbiAgICAgICAgICAgICAgICAgICAgXCJvd2wtc2luZ2xlLWl0ZW0tbmF2IHJpZ2h0IGNhcm91c2VsLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgbmF2Q29udGFpbmVyQ2xhc3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgbmF2VGV4dCAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAgXCI8aSBjbGFzcz1cXFwib3dsLXNpbmdsZS1pdGVtLWNvbnRyb2wgZmEgZmEtY2hldnJvbi1sZWZ0XFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjxpIGNsYXNzPVxcXCJvd2wtc2luZ2xlLWl0ZW0tY29udHJvbCBmYSBmYS1jaGV2cm9uLXJpZ2h0XFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPlwiXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzbWFydFNwZWVkICAgICAgIDogMzUwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnb1RvKGluZGV4KVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCAkb3dsID0gJCh0aGlzLiRyZWZzLnNpbmdsZSk7XG5cbiAgICAgICAgICAgICRvd2wudHJpZ2dlcihcInRvLm93bC5jYXJvdXNlbFwiLCBbXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgMzUwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRBbHRUZXh0KGltYWdlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2UgJiYgaW1hZ2UuYWx0ZXJuYXRlID8gaW1hZ2UuYWx0ZXJuYXRlIDogdGhpcy4kb3B0aW9ucy5maWx0ZXJzLml0ZW1OYW1lKHRoaXMuY3VycmVudFZhcmlhdGlvbik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SW1hZ2VOYW1lKGltYWdlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2UgJiYgaW1hZ2UubmFtZSA/IGltYWdlLm5hbWUgOiB0aGlzLiRvcHRpb25zLmZpbHRlcnMuaXRlbU5hbWUodGhpcy5jdXJyZW50VmFyaWF0aW9uKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkTGlnaHRib3goKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic2NyaXB0I2xpZ2h0Ym94c2NyaXB0XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChzY3JpcHQpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0LmlkID0gXCJsaWdodGJveHNjcmlwdFwiO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuc3JjID0gYCR7IHRoaXMucGx1Z2luUGF0aCB9L2pzL2Rpc3QvbGlnaHRib3gubWluLmpzYDtcblxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gcmVzb2x2ZSgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZXZlbnQgPT4gcmVqZWN0KGV2ZW50KSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbjwvc2NyaXB0PlxuIiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0l0ZW1JbWFnZUNhcm91c2VsLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0l0ZW1JbWFnZUNhcm91c2VsLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vSXRlbUltYWdlQ2Fyb3VzZWwudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPWQ0ODg0ZmYwJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL0l0ZW1JbWFnZUNhcm91c2VsLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vSXRlbUltYWdlQ2Fyb3VzZWwudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgbnVsbCxcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2251\n')}}]);