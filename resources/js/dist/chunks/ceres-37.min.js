"use strict";(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[37],{6211:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{itemscope:"",itemtype:"http://schema.org/Thing"}},[[i("div",{ref:"single",staticClass:"single-carousel owl-carousel owl-theme owl-single-item mt-0"},e._l(e.singleImages,(function(t){return i("div",{staticClass:"prop-1-1"},[i("a",{attrs:{href:t.url,"data-lightbox":"single-item-image"+e._uid}},[i("img",{staticClass:"owl-lazy",attrs:{"data-src":t.url,alt:e.getAltText(t),title:e.getImageName(t)}})])])})),0),e._v(" "),e.showThumbs?i("div",{ref:"thumbs",staticClass:"owl-thumbs owl-carousel owl-theme owl-single-item",attrs:{id:"thumb-carousel"}},e._l(e.carouselImages,(function(t,s){return i("div",{staticClass:"prop-1-1"},[i("div",{staticClass:"image-container",on:{click:function(t){return e.goTo(s)}}},[i("lazy-img",{class:{active:e.currentItem===s},attrs:{"picture-class":"owl-thumb border-appearance","image-url":t.url,alt:e.getAltText(t),title:e.getImageName(t)}})],1)])})),0):e._e()],e._v(" "),e.initialized?e._e():i("div",{staticClass:"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0"},[i("div",{staticClass:"prop-1-1"},[i("img",{staticClass:"owl-placeholder",attrs:{src:e.singleImages[0].url,alt:e.getAltText(e.singleImages[0].url),title:e.getImageName(e.singleImages[0].url)}})])])],2)};s._withStripped=!0;var a=i(1023),l={name:"item-image-carousel",props:{maxQuantity:{type:Number,default:10},imageUrlAccessor:{type:String,default:"url"},showThumbs:{type:Boolean,default:!0},showDots:{type:Boolean,default:!0},animationStyle:{type:String,default:"standard"},pluginPath:{type:String,default:""}},inject:{itemId:{default:null}},data:()=>({currentItem:0,initialized:!1}),computed:{currentVariation(){return this.$store.getters[`${this.itemId}/currentItemVariation`]},carouselImages(){return this.$options.filters.itemImages(this.currentVariation.images,"urlPreview").slice(0,this.maxQuantity)},singleImages(){return this.$options.filters.itemImages(this.currentVariation.images,this.imageUrlAccessor).slice(0,this.maxQuantity)}},watch:{currentVariation:{handler(e,t){e!==t&&setTimeout((()=>{this.reInitialize()}),1)},deep:!0}},mounted(){this.$nextTick((()=>{this.loadLightbox().then((()=>{this.initCarousel(),this.initThumbCarousel()})).catch((e=>{console.log("error while loading lightbox",e)}))}))},methods:{getImageCount(){return this.carouselImages.length>this.maxQuantity?this.maxQuantity:this.carouselImages.length},reInitialize(){const e=$(this.$refs.single);e.trigger("destroy.owl.carousel"),e.html(e.find(".owl-stage-outer").html()).removeClass("owl-loaded"),e.find(".owl-item").remove();const t=$(this.$refs.thumbs);t.trigger("destroy.owl.carousel"),t.html(t.find(".owl-stage-outer").html()).removeClass("owl-loaded"),t.find(".owl-item").remove(),this.initCarousel(),this.initThumbCarousel()},initCarousel(){const e=this.getImageCount(),t={autoHeight:!0,dots:this.showDots,items:1,lazyLoad:!0,rewind:!0,margin:10,mouseDrag:e>1,nav:e>1,navClass:["owl-single-item-nav left carousel-control","owl-single-item-nav right carousel-control"],navContainerClass:"",navText:['<i class="owl-single-item-control fa fa-chevron-left" aria-hidden="true"></i>','<i class="owl-single-item-control fa fa-chevron-right" aria-hidden="true"></i>'],smartSpeed:350,onChanged:e=>{$(this.$refs.thumbs).trigger("to.owl.carousel",[e.page.index,350])},onInitialized:e=>{this.initialized=!0}};"standard"!==this.animationStyle&&(t.animateOut=this.animationStyle),$(this.$refs.single).owlCarousel(t),(0,a.le)(window.lightbox)||lightbox.option({wrapAround:!0,albumLabel:this.$translate("Ceres::Template.singleItemLightboxImageShown")}),$(this.$refs.single).on("changed.owl.carousel",(e=>{this.currentItem=e.page.index}))},initThumbCarousel(){$(this.$refs.thumbs).owlCarousel({autoHeight:!0,dots:!1,items:5,lazyLoad:!0,loop:!1,margin:10,mouseDrag:!1,center:!1,nav:!0,navClass:["owl-single-item-nav left carousel-control","owl-single-item-nav right carousel-control"],navContainerClass:"",navText:['<i class="owl-single-item-control fa fa-chevron-left" aria-hidden="true"></i>','<i class="owl-single-item-control fa fa-chevron-right" aria-hidden="true"></i>'],smartSpeed:350})},goTo(e){$(this.$refs.single).trigger("to.owl.carousel",[e,350])},getAltText(e){return e&&e.alternate?e.alternate:this.$options.filters.itemName(this.currentVariation)},getImageName(e){return e&&e.name?e.name:this.$options.filters.itemName(this.currentVariation)},loadLightbox(){return new Promise(((e,t)=>{const i=document.querySelector("script#lightboxscript");if((0,a.le)(i)){const i=document.createElement("script");i.type="text/javascript",i.id="lightboxscript",i.src=`${this.pluginPath}/js/dist/lightbox.min.js`,i.addEventListener("load",(()=>e()),!1),i.addEventListener("error",(e=>t(e)),!1),document.body.appendChild(i)}else e()}))}}},r=(0,i(1900).Z)(l,s,[],!1,null,null,null);r.options.__file="resources/js/src/app/components/item/ItemImageCarousel.vue";var o=r.exports}}]);
//# sourceMappingURL=ceres-37.min.js.map