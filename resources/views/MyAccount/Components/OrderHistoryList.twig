{{ component( "Ceres::MyAccount.Components.ChangePaymentMethod" ) }}
{{ component( "Ceres::MyAccount.Components.OrderHistoryListItem" ) }}

<script type="x/template" id="vue-order-history-list">
    <div class="order-history-list">
        <div class="row mt-3 mb-2" v-if="orderList.totalsCount > ordersPerPage || orderId !== null">
            <div class="col-sm-12">
                <div class="float-left counter">
                    {{ trans("Ceres::Template.orderHistoryShow", {"countStart": "${ orderList.firstOnPage }", "countEnd": "${ orderList.lastOnPage }", "orderMaxCount": "${ orderList.totalsCount }" }) }}
                </div>
            </div>
            <div class="col-sm-12">
                <div class="input-unit mt-3">
                    <label :for="'order-id-input-id_' + _uid">{{ trans("Ceres::Template.orderHistoryOrderId") }}</label>
                    <input type="text" :id="'order-id-input-id_' + _uid" v-model="orderId">
                </div>
                <button class="btn btn-primary btn-appearance btn-large btn-only-icon-xs-down" type="button" @click="searchOrderId()"><span>Suchen</span><i aria-hidden="true" class="fa fa-search"></i></button>
                <button class="input-unit-btn btn btn-secondary btn-appearance btn-large btn-only-icon-xs-down" type="button" @click="setPage(1)"><span>Zur√ºcksetzen</span><i aria-hidden="true" class="fa fa-undo"></i></button>
                {% include "Ceres::PageDesign.Partials.PaginationTemplate" with { 'page': 'orderList.page', 'pageMax': 'orderList.lastPageNumber', 'setPage': 'setPage' } %}

            </div>
        </div>

        <loading-animation v-if="waiting"></loading-animation>
        
        <template v-else-if="orderList.totalsCount > 0">
            <div class="container-header d-none d-md-flex mb-2">
                <div class="col-md-10">
                    <div class="row">
                        <div class="col-md-2">{{ trans("Ceres::Template.orderHistoryOrderId") }}</div>
                        <div class="col-md-2">{{ trans("Ceres::Template.orderHistoryTotal") }}</div>
                        <div class="col-md-2">{{ trans("Ceres::Template.orderHistoryOrderDate") }}</div>
                        <div class="col-md-2">{{ trans("Ceres::Template.orderHistoryShippingDate") }}</div>
                        <div class="col-md-4">{{ trans("Ceres::Template.orderHistoryStatus") }}</div>
                    </div>
                </div>
                <div class="col-md-2">{{ trans("Ceres::Template.orderHistoryFurtherActions") }}</div>
            </div>

            <div class="order-item border-top">
                <order-history-list-item
                    v-for="order in orderList.entries"
                    :key="order.id"
                    :order="order"
                    :allow-payment-provider-change="allowPaymentProviderChange"
                    :allow-return="allowReturn">
                </order-history-list-item>
            </div>
        </template>
        <template v-else>
            <p class="text-muted h4 my-4 text-center">{{ trans("Ceres::Template.orderHistoryNoOrders") }}</p>
        </template>
    </div>
</script>
